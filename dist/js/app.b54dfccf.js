(function(){"use strict";var e={3277:function(e,t,a){var s=a(3751),r=a(6166),o=a(641),n=a(33),l=a.p+"img/logo.32bdffd4.png";const i=e=>((0,o.Qi)("data-v-0df0cbc3"),e=e(),(0,o.jt)(),e),d={class:"h-screen"},c={class:"flex justify-center items-center min-h-screen"},u={class:"wrapper text-gray-800"},p=i((()=>(0,o.Lk)("h1",{class:"title text-3xl mb-8 font-bold"},"BIT INVENTORY",-1))),h=i((()=>(0,o.Lk)("img",{src:l,alt:"Logo",style:{width:"320px",height:"auto"}},null,-1))),m=i((()=>(0,o.Lk)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google Logo",class:"ml-2 h-6 w-6"},null,-1))),k=i((()=>(0,o.Lk)("span",{class:"mr-3"},null,-1))),f={key:0,class:"custom-modal"},b={class:"modal-content"},v=i((()=>(0,o.Lk)("p",{class:"warning-msg"},"Sign-in failed. Please try again.",-1))),L={key:0,class:"battery-container"};function g(e,t,a,s,r,l){return(0,o.uX)(),(0,o.CE)("body",d,[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[(0,o.Lk)("form",null,[p,h,(0,o.Lk)("div",{onClick:t[0]||(t[0]=(...e)=>l.handleSignIn&&l.handleSignIn(...e)),type:"button",class:"input-box bg-sandy button-hover hover:text-white hover:shadow-lg font-bold py-2 px-4 rounded-full flex items-center justify-center transition duration-300 ease-in-out"},[m,k,(0,o.eW)(" Sign in with Google ")])])])]),r.showSignInFailed?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",b,[v,r.countdownTime>0?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",{class:"battery-level",style:(0,n.Tr)({width:r.batteryWidth})},null,4)])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])}a(4114);var y={data(){return{showSignInFailed:!1,countdownTime:5,countdownInterval:null,batteryWidth:"100%"}},created(){const e=sessionStorage.getItem("isUserSignedIn");e&&this.$router.push({name:"DashboardView"})},methods:{async handleSignIn(){const e=sessionStorage.getItem("isUserSignedIn");if(e)this.$router.push({name:"DashboardView"});else try{const e=await this.$gAuth.signIn();if(!e)return this.showSignInFailed=!0,this.startCountdown(),null;const t=e.getBasicProfile();sessionStorage.setItem("userData",JSON.stringify({username:t.getName(),email:t.getEmail(),profilePhoto:t.getImageUrl()})),sessionStorage.setItem("isUserSignedIn",!0);const a=await fetch("http://localhost:3000/checkEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.getEmail()})});if(!a.ok)throw new Error("Network response was not ok");const s=await a.json();s.exists?this.$router.push("/dashboard"):this.$router.push({name:"UnauthorizedPage"})}catch(t){console.error(t),this.showSignInFailed=!0,this.resetCountdown(),this.startCountdown()}},closeSignInFailedPopup(){this.showSignInFailed=!1,this.resetCountdown(),clearInterval(this.countdownInterval)},startCountdown(){this.countdownInterval=setInterval((()=>{this.countdownTime--,this.updateBatteryLevel(),this.countdownTime<=0&&(clearInterval(this.countdownInterval),this.showSignInFailed=!1)}),1e3)},updateBatteryLevel(){const e=this.countdownTime/5*100;this.batteryWidth=`${e}%`},resetCountdown(){this.countdownTime=5,this.batteryWidth="100%"}}},P=a(6262);const w=(0,P.A)(y,[["render",g],["__scopeId","data-v-0df0cbc3"]]);var N=w;const C=e=>((0,o.Qi)("data-v-31ea71d2"),e=e(),(0,o.jt)(),e),S={lang:"en",dir:"ltr"},E=C((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"utf-8"})],-1))),_=C((()=>(0,o.Lk)("body",null,[(0,o.Lk)("div",{class:"center"},[(0,o.Lk)("div",{class:"ring"}),(0,o.Lk)("span",null,"loading...")])],-1))),q=[E,_];function I(e,t,a,s,r,n){return(0,o.uX)(),(0,o.CE)("html",S,q)}var T={name:"DashboardView",async mounted(){await this.delay(2e3),await this.getUserRole()},methods:{async delay(e){return new Promise((t=>setTimeout(t,e)))},async getUserRole(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch("http://localhost:3000/getUserRole",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),s=await a.json();if(a.ok){const{role:e}=s;this.redirectBasedOnRole(e)}else this.$router.push({name:"UnauthorizedPage"})}catch(e){this.$router.push({name:"UnauthorizedPage"})}},redirectBasedOnRole(e){"Head"===e?this.$router.push({name:"DashboardHead"}):"Member"===e?this.$router.push({name:"DashboardMember"}):"Manager"===e?this.$router.push({name:"DashboardInventory"}):this.$router.push({name:"UnauthorizedPage"})}}};const U=(0,P.A)(T,[["render",I],["__scopeId","data-v-31ea71d2"]]);var X=U;const j=e=>((0,o.Qi)("data-v-444eb660"),e=e(),(0,o.jt)(),e),R={lang:"en"},F=j((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),x=j((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),O={class:"main-content"},D=(0,o.Fv)('<div class="cards" data-v-444eb660><div class="card-single" data-v-444eb660><div data-v-444eb660><h1 data-v-444eb660>54</h1><span data-v-444eb660>Customers</span></div><div data-v-444eb660><span class="las la-users" data-v-444eb660></span></div></div><div class="card-single" data-v-444eb660><div data-v-444eb660><h1 data-v-444eb660>79</h1><span data-v-444eb660>Project</span></div><div data-v-444eb660><span class="las la-clipboard-list" data-v-444eb660></span></div></div><div class="card-single" data-v-444eb660><div data-v-444eb660><h1 data-v-444eb660>124</h1><span data-v-444eb660>Orders</span></div><div data-v-444eb660><span class="las la-shopping-cart" data-v-444eb660></span></div></div><div class="card-single" data-v-444eb660><div data-v-444eb660><h1 data-v-444eb660><span data-v-444eb660>â‚¹</span>60000</h1><span data-v-444eb660>Income</span></div><div data-v-444eb660><span class="las la-wallet" style="color:white;" data-v-444eb660></span></div></div></div>',1),A={class:"recent-grid"},W=(0,o.Fv)('<div class="projects" data-v-444eb660><div class="card" data-v-444eb660><div class="card-header" data-v-444eb660><h2 data-v-444eb660>Recent Activities</h2><button data-v-444eb660>See all<span class="las la-arrow-right" data-v-444eb660></span></button></div><div class="card-body" data-v-444eb660><div class="table-responsive" data-v-444eb660><table width="100%" data-v-444eb660><thead data-v-444eb660><tr data-v-444eb660><td data-v-444eb660>Product Title</td><td data-v-444eb660>DepartMent</td><td data-v-444eb660>Status</td></tr></thead><tbody data-v-444eb660><tr data-v-444eb660><td data-v-444eb660>UI/UX Design</td><td data-v-444eb660>UI Team</td><td data-v-444eb660><span class="status purple" data-v-444eb660></span>inprogress</td></tr><tr data-v-444eb660><td data-v-444eb660>Web development</td><td data-v-444eb660>Ushop app</td><td data-v-444eb660><span class="status pink" data-v-444eb660></span>pending</td></tr><tr data-v-444eb660><td data-v-444eb660>UI/UX Design</td><td data-v-444eb660>UI Team</td><td data-v-444eb660><span class="status orange" data-v-444eb660></span>inprogress</td></tr><tr data-v-444eb660><td data-v-444eb660>Web development</td><td data-v-444eb660>Ushop app</td><td data-v-444eb660><span class="status orange" data-v-444eb660></span>pending</td></tr><tr data-v-444eb660><td data-v-444eb660>UI/UX Design</td><td data-v-444eb660>UI Team</td><td data-v-444eb660><span class="status orange" data-v-444eb660></span>inprogress</td></tr><tr data-v-444eb660><td data-v-444eb660>Web development</td><td data-v-444eb660>Ushop app</td><td data-v-444eb660><span class="status orange" data-v-444eb660></span>pending</td></tr><tr data-v-444eb660><td data-v-444eb660>UI/UX Design</td><td data-v-444eb660>UI Team</td><td data-v-444eb660><span class="status pink" data-v-444eb660></span>inprogress</td></tr><tr data-v-444eb660><td data-v-444eb660>UI/UX Design</td><td data-v-444eb660>UI Team</td><td data-v-444eb660><span class="status purple" data-v-444eb660></span>inprogress</td></tr></tbody></table></div></div></div></div>',1),M={class:"task-container"},K=j((()=>(0,o.Lk)("div",{class:"task-header"},[(0,o.Lk)("h3",null,"Today's Tasks")],-1))),J={class:"task-body"},Q={class:"todo-list"},H=j((()=>(0,o.Lk)("span",{class:"las la-plus-circle plus-icon"},null,-1))),B=[H],V={class:"task-table"},$=j((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{class:"task-name-cell"},"Task Name"),(0,o.Lk)("th",{class:"action-cell"},"Action")])],-1))),z={class:"task-name-cell"},Y={class:"action-cell"},G=["onClick"],Z=j((()=>(0,o.Lk)("span",{class:"las la-minus-circle remove-btn"},null,-1))),ee=[Z];function te(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("html",R,[F,(0,o.Lk)("body",null,[x,(0,o.bF)(d),(0,o.Lk)("div",O,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Dashboard"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[D,(0,o.Lk)("div",A,[W,(0,o.Lk)("div",M,[K,(0,o.Lk)("div",J,[(0,o.Lk)("div",Q,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"ðŸ“‘ Add a task","onUpdate:modelValue":t[0]||(t[0]=e=>l.newTaskName=e),class:"add-input"},null,512),[[s.Jo,l.newTaskName]]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.validateAndAddTask&&i.validateAndAddTask(...e)),class:"add-button"},B)]),(0,o.Lk)("table",V,[$,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tasks,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e._id},[(0,o.Lk)("td",z,(0,n.v_)(e.taskName),1),(0,o.Lk)("td",Y,[(0,o.Lk)("button",{onClick:t=>i.removeTask(e._id)},ee,8,G)])])))),128))])])])])])])])])])}const ae=e=>((0,o.Qi)("data-v-6c1bbd91"),e=e(),(0,o.jt)(),e),se={class:"slidebar"},re=ae((()=>(0,o.Lk)("div",{class:"slidebar-brand"},[(0,o.Lk)("h2",null,[(0,o.Lk)("span",{class:"las la-cube la-2x logo-icon"}),(0,o.eW)(),(0,o.Lk)("span",null,"BIT INVENTORY")])],-1))),oe={class:"sliderbar-menu"},ne=ae((()=>(0,o.Lk)("span",{class:"las la-igloo"},null,-1))),le=ae((()=>(0,o.Lk)("span",null,"Dashboard",-1))),ie=ae((()=>(0,o.Lk)("span",{class:"las la-box"},null,-1))),de=ae((()=>(0,o.Lk)("span",null,"Product",-1))),ce=ae((()=>(0,o.Lk)("span",{class:"las la-paper-plane"},null,-1))),ue=ae((()=>(0,o.Lk)("span",null,"Request",-1))),pe=ae((()=>(0,o.Lk)("span",{class:"las la-check-circle"},null,-1))),he=ae((()=>(0,o.Lk)("span",null,"Approval",-1))),me=ae((()=>(0,o.Lk)("span",{class:"las la-shopping-bag mr-2"},null,-1))),ke=ae((()=>(0,o.Lk)("span",null,"Buy",-1))),fe=ae((()=>(0,o.Lk)("span",{class:"las la-handshake mr-2"},null,-1))),be=ae((()=>(0,o.Lk)("span",null,"Borrowed",-1)));function ve(e,t,a,s,r,l){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",se,[re,(0,o.Lk)("div",oe,[(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/head")})},[(0,o.bF)(i,{to:"/dashboard/head",onClick:t[0]||(t[0]=e=>l.setActive("/dashboard/head"))},{default:(0,o.k6)((()=>[ne,le])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/product_head")})},[(0,o.bF)(i,{to:"/dashboard/product_head",onClick:t[1]||(t[1]=e=>l.setActive("/dashboard/product_head"))},{default:(0,o.k6)((()=>[ie,de])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/request_head")})},[(0,o.bF)(i,{to:"/dashboard/request_head",onClick:t[2]||(t[2]=e=>l.setActive("/dashboard/request_head"))},{default:(0,o.k6)((()=>[ce,ue])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/approval_head")})},[(0,o.bF)(i,{to:"/dashboard/approval_head",onClick:t[3]||(t[3]=e=>l.setActive("/dashboard/approval_head"))},{default:(0,o.k6)((()=>[pe,he])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/Buy_Product_Head")})},[(0,o.bF)(i,{to:"/dashboard/Buy_Product_Head",onClick:t[4]||(t[4]=e=>l.setActive("/dashboard/Buy_Product_Head"))},{default:(0,o.k6)((()=>[me,(0,o.eW)(),ke])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/borrowed_Products_Head")})},[(0,o.bF)(i,{to:"/dashboard/borrowed_Products_Head",onClick:t[5]||(t[5]=e=>l.setActive("/dashboard/borrowed_Products_Head"))},{default:(0,o.k6)((()=>[fe,(0,o.eW)(),be])),_:1})],2)])])])}var Le={name:"SidebarMain",data(){return{activeItem:null}},methods:{setActive(e){this.activeItem=e},isActive(e){return this.$route.path===e}},watch:{$route(e){this.activeItem=e.path}}};const ge=(0,P.A)(Le,[["render",ve],["__scopeId","data-v-6c1bbd91"]]);var ye=ge;const Pe=e=>((0,o.Qi)("data-v-ad911b8e"),e=e(),(0,o.jt)(),e),we={class:"header-main"},Ne=Pe((()=>(0,o.Lk)("label",{for:"nav-toggle"},[(0,o.Lk)("span",{class:"las la-bars",style:{"font-size":"2rem"}})],-1))),Ce={class:"user-wrapper"},Se=["src"],Ee={class:"user-info"};function _e(e,t,a,s,r,l){return(0,o.uX)(),(0,o.CE)("header",we,[(0,o.Lk)("h2",null,[Ne,(0,o.eW)(" "+(0,n.v_)(a.title),1)]),(0,o.Lk)("div",Ce,[(0,o.Lk)("img",{src:a.userProfile.profilePhoto,class:"img-inventory",width:"40px",height:"40px",alt:"Profile Photo"},null,8,Se),(0,o.Lk)("div",Ee,[(0,o.Lk)("h4",null,(0,n.v_)(a.userName),1),(0,o.Lk)("small",null,(0,n.v_)(a.userRole),1)])])])}var qe={name:"HeaderMain",props:{userProfile:{type:Object,required:!0},userName:{type:String,required:!0},userRole:{type:String,required:!0},title:{type:String,required:!0}}};const Ie=(0,P.A)(qe,[["render",_e],["__scopeId","data-v-ad911b8e"]]);var Te=Ie,Ue={name:"DashboardHead",components:{SidebarMain:ye,HeaderMain:Te},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",title:"",tasks:[],newTaskName:"",email:""}},mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a,"Head"!==a&&this.$router.push({name:"UnauthorizedPage"})})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchTasks()},methods:{validateAndAddTask(){""!==this.newTaskName.trim()&&this.addTask()},async fetchTasks(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch(`http://localhost:3000/getTasks?email=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await a.json();if(!a.ok)throw new Error(s.message||"Error fetching tasks");this.tasks=s.tasks}catch(e){console.error("Error fetching tasks:",e)}},async addTask(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch("http://localhost:3000/addTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskName:this.newTaskName,email:t})}),s=await a.json();if(!a.ok)throw new Error(s.message||"Error adding task");this.tasks.push(s.task),this.newTaskName=""}catch(e){console.error("Error adding task:",e)}},async removeTask(e){try{const t=JSON.parse(sessionStorage.getItem("userData")),a=t.email,s=await fetch("http://localhost:3000/removeTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e,email:a})});if(!s.ok)throw new Error("Error removing task");this.tasks=this.tasks.filter((t=>t._id!==e))}catch(t){console.error("Error removing task:",t)}}}};const Xe=(0,P.A)(Ue,[["render",te],["__scopeId","data-v-444eb660"]]);var je=Xe;const Re=e=>((0,o.Qi)("data-v-6fb6975a"),e=e(),(0,o.jt)(),e),Fe={lang:"en"},xe=Re((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),Oe=Re((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),De={class:"main-content"},Ae=(0,o.Fv)('<div class="cards" data-v-6fb6975a><div class="card-single" data-v-6fb6975a><div data-v-6fb6975a><h1 data-v-6fb6975a>54</h1><span data-v-6fb6975a>Customers</span></div><div data-v-6fb6975a><span class="las la-users" data-v-6fb6975a></span></div></div><div class="card-single" data-v-6fb6975a><div data-v-6fb6975a><h1 data-v-6fb6975a>79</h1><span data-v-6fb6975a>Project</span></div><div data-v-6fb6975a><span class="las la-clipboard-list" data-v-6fb6975a></span></div></div><div class="card-single" data-v-6fb6975a><div data-v-6fb6975a><h1 data-v-6fb6975a>124</h1><span data-v-6fb6975a>Orders</span></div><div data-v-6fb6975a><span class="las la-shopping-cart" data-v-6fb6975a></span></div></div><div class="card-single" data-v-6fb6975a><div data-v-6fb6975a><h1 data-v-6fb6975a><span data-v-6fb6975a>â‚¹</span>60000</h1><span data-v-6fb6975a>Income</span></div><div data-v-6fb6975a><span class="las la-wallet" style="color:white;" data-v-6fb6975a></span></div></div></div>',1),We={class:"recent-grid"},Me=(0,o.Fv)('<div class="projects" data-v-6fb6975a><div class="card" data-v-6fb6975a><div class="card-header" data-v-6fb6975a><h2 data-v-6fb6975a>Recent Activities</h2><button data-v-6fb6975a>See all<span class="las la-arrow-right" data-v-6fb6975a></span></button></div><div class="card-body" data-v-6fb6975a><div class="table-responsive" data-v-6fb6975a><table width="100%" data-v-6fb6975a><thead data-v-6fb6975a><tr data-v-6fb6975a><td data-v-6fb6975a>Product Title</td><td data-v-6fb6975a>DepartMent</td><td data-v-6fb6975a>Status</td></tr></thead><tbody data-v-6fb6975a><tr data-v-6fb6975a><td data-v-6fb6975a>UI/UX Design</td><td data-v-6fb6975a>UI Team</td><td data-v-6fb6975a><span class="status purple" data-v-6fb6975a></span>inprogress</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>Web development</td><td data-v-6fb6975a>Ushop app</td><td data-v-6fb6975a><span class="status pink" data-v-6fb6975a></span>pending</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>UI/UX Design</td><td data-v-6fb6975a>UI Team</td><td data-v-6fb6975a><span class="status orange" data-v-6fb6975a></span>inprogress</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>Web development</td><td data-v-6fb6975a>Ushop app</td><td data-v-6fb6975a><span class="status orange" data-v-6fb6975a></span>pending</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>UI/UX Design</td><td data-v-6fb6975a>UI Team</td><td data-v-6fb6975a><span class="status orange" data-v-6fb6975a></span>inprogress</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>Web development</td><td data-v-6fb6975a>Ushop app</td><td data-v-6fb6975a><span class="status orange" data-v-6fb6975a></span>pending</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>UI/UX Design</td><td data-v-6fb6975a>UI Team</td><td data-v-6fb6975a><span class="status pink" data-v-6fb6975a></span>inprogress</td></tr><tr data-v-6fb6975a><td data-v-6fb6975a>UI/UX Design</td><td data-v-6fb6975a>UI Team</td><td data-v-6fb6975a><span class="status purple" data-v-6fb6975a></span>inprogress</td></tr></tbody></table></div></div></div></div>',1),Ke={class:"task-container"},Je=Re((()=>(0,o.Lk)("div",{class:"task-header"},[(0,o.Lk)("h3",null,"Today's Tasks")],-1))),Qe={class:"task-body"},He={class:"todo-list"},Be=Re((()=>(0,o.Lk)("span",{class:"las la-plus-circle plus-icon"},null,-1))),Ve=[Be],$e={class:"task-table"},ze=Re((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{class:"task-name-cell"},"Task Name"),(0,o.Lk)("th",{class:"action-cell"},"Action")])],-1))),Ye={class:"task-name-cell"},Ge={class:"action-cell"},Ze=["onClick"],et=Re((()=>(0,o.Lk)("span",{class:"las la-minus-circle remove-btn"},null,-1))),tt=[et];function at(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("html",Fe,[xe,(0,o.Lk)("body",null,[Oe,(0,o.bF)(d),(0,o.Lk)("div",De,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Dashboard"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[Ae,(0,o.Lk)("div",We,[Me,(0,o.Lk)("div",Ke,[Je,(0,o.Lk)("div",Qe,[(0,o.Lk)("div",He,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"ðŸ“‘ Add a task","onUpdate:modelValue":t[0]||(t[0]=e=>l.newTaskName=e),class:"add-input"},null,512),[[s.Jo,l.newTaskName]]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.validateAndAddTask&&i.validateAndAddTask(...e)),class:"add-button"},Ve)]),(0,o.Lk)("table",$e,[ze,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tasks,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e._id},[(0,o.Lk)("td",Ye,(0,n.v_)(e.taskName),1),(0,o.Lk)("td",Ge,[(0,o.Lk)("button",{onClick:t=>i.removeTask(e._id)},tt,8,Ze)])])))),128))])])])])])])])])])}const st=e=>((0,o.Qi)("data-v-47f5d297"),e=e(),(0,o.jt)(),e),rt={class:"slidebar"},ot=st((()=>(0,o.Lk)("div",{class:"slidebar-brand"},[(0,o.Lk)("h2",null,[(0,o.Lk)("span",{class:"las la-cube la-2x logo-icon"}),(0,o.eW)(),(0,o.Lk)("span",null,"BIT INVENTORY")])],-1))),nt={class:"sliderbar-menu"},lt=st((()=>(0,o.Lk)("span",{class:"las la-igloo"},null,-1))),it=st((()=>(0,o.Lk)("span",null,"Dashboard",-1))),dt=st((()=>(0,o.Lk)("span",{class:"las la-box"},null,-1))),ct=st((()=>(0,o.Lk)("span",null,"Product",-1))),ut=st((()=>(0,o.Lk)("span",{class:"las la-paper-plane mr-2"},null,-1))),pt=st((()=>(0,o.Lk)("span",null,"Request",-1))),ht=st((()=>(0,o.Lk)("span",{class:"las la-shopping-bag mr-2"},null,-1))),mt=st((()=>(0,o.Lk)("span",null,"Buy",-1))),kt=st((()=>(0,o.Lk)("span",{class:"las la-handshake mr-2"},null,-1))),ft=st((()=>(0,o.Lk)("span",null,"Borrowed",-1)));function bt(e,t,a,s,r,l){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",rt,[ot,(0,o.Lk)("div",nt,[(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/member")})},[(0,o.bF)(i,{to:"/dashboard/member",onClick:t[0]||(t[0]=e=>l.setActive("/dashboard/member"))},{default:(0,o.k6)((()=>[lt,(0,o.eW)(),it])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/product_public")})},[(0,o.bF)(i,{to:"/dashboard/product_public",onClick:t[1]||(t[1]=e=>l.setActive("/dashboard/product_public"))},{default:(0,o.k6)((()=>[dt,(0,o.eW)(),ct])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/request_member")})},[(0,o.bF)(i,{to:"/dashboard/request_member",onClick:t[2]||(t[2]=e=>l.setActive("/dashboard/request_member"))},{default:(0,o.k6)((()=>[ut,(0,o.eW)(),pt])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/buy_product_member")})},[(0,o.bF)(i,{to:"/dashboard/buy_product_member",onClick:t[3]||(t[3]=e=>l.setActive("/dashboard/buy_product_member"))},{default:(0,o.k6)((()=>[ht,(0,o.eW)(),mt])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/borrowed_Products_Member")})},[(0,o.bF)(i,{to:"/dashboard/borrowed_Products_Member",onClick:t[4]||(t[4]=e=>l.setActive("/dashboard/borrowed_Products_Member"))},{default:(0,o.k6)((()=>[kt,(0,o.eW)(),ft])),_:1})],2)])])])}var vt={name:"SidebarMain",data(){return{activeItem:null}},methods:{setActive(e){this.activeItem=e},isActive(e){return this.$route.path===e}},watch:{$route(e){this.activeItem=e.path}}};const Lt=(0,P.A)(vt,[["render",bt],["__scopeId","data-v-47f5d297"]]);var gt=Lt;const yt=e=>((0,o.Qi)("data-v-04ea6292"),e=e(),(0,o.jt)(),e),Pt={class:"header-main"},wt=yt((()=>(0,o.Lk)("label",{for:"nav-toggle"},[(0,o.Lk)("span",{class:"las la-bars",style:{"font-size":"2rem"}})],-1))),Nt={class:"user-wrapper"},Ct=["src"],St={class:"user-info"};function Et(e,t,a,s,r,l){return(0,o.uX)(),(0,o.CE)("header",Pt,[(0,o.Lk)("h2",null,[wt,(0,o.eW)(" "+(0,n.v_)(a.title),1)]),(0,o.Lk)("div",Nt,[(0,o.Lk)("img",{src:a.userProfile.profilePhoto,class:"img-inventory",width:"40px",height:"40px",alt:"Profile Photo"},null,8,Ct),(0,o.Lk)("div",St,[(0,o.Lk)("h4",null,(0,n.v_)(a.userName),1),(0,o.Lk)("small",null,(0,n.v_)(a.userRole),1)])])])}var _t={name:"HeaderMain",props:{userProfile:{type:Object,required:!0},userName:{type:String,required:!0},userRole:{type:String,required:!0},title:{type:String,required:!0}}};const qt=(0,P.A)(_t,[["render",Et],["__scopeId","data-v-04ea6292"]]);var It=qt,Tt={name:"DashboardMember",components:{SidebarMain:gt,HeaderMain:It},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",title:"",tasks:[],newTaskName:"",email:""}},mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a,"Member"!==a&&this.$router.push({name:"UnauthorizedPage"})})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchTasks()},methods:{validateAndAddTask(){""!==this.newTaskName.trim()&&this.addTask()},async fetchTasks(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch(`http://localhost:3000/getTasks?email=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await a.json();if(!a.ok)throw new Error(s.message||"Error fetching tasks");this.tasks=s.tasks}catch(e){console.error("Error fetching tasks:",e)}},async addTask(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch("http://localhost:3000/addTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskName:this.newTaskName,email:t})}),s=await a.json();if(!a.ok)throw new Error(s.message||"Error adding task");this.tasks.push(s.task),this.newTaskName=""}catch(e){console.error("Error adding task:",e)}},async removeTask(e){try{const t=JSON.parse(sessionStorage.getItem("userData")),a=t.email,s=await fetch("http://localhost:3000/removeTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e,email:a})});if(!s.ok)throw new Error("Error removing task");this.tasks=this.tasks.filter((t=>t._id!==e))}catch(t){console.error("Error removing task:",t)}}}};const Ut=(0,P.A)(Tt,[["render",at],["__scopeId","data-v-6fb6975a"]]);var Xt=Ut;const jt=e=>((0,o.Qi)("data-v-0b0a8d56"),e=e(),(0,o.jt)(),e),Rt=jt((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),Ft={class:"main-content"},xt=(0,o.Fv)('<div class="cards" data-v-0b0a8d56><div class="card-single" data-v-0b0a8d56><div data-v-0b0a8d56><h1 data-v-0b0a8d56>54</h1><span data-v-0b0a8d56>Customers</span></div><div data-v-0b0a8d56><span class="las la-users" data-v-0b0a8d56></span></div></div><div class="card-single" data-v-0b0a8d56><div data-v-0b0a8d56><h1 data-v-0b0a8d56>79</h1><span data-v-0b0a8d56>Project</span></div><div data-v-0b0a8d56><span class="las la-clipboard-list" data-v-0b0a8d56></span></div></div><div class="card-single" data-v-0b0a8d56><div data-v-0b0a8d56><h1 data-v-0b0a8d56>124</h1><span data-v-0b0a8d56>Orders</span></div><div data-v-0b0a8d56><span class="las la-shopping-cart" data-v-0b0a8d56></span></div></div><div class="card-single" data-v-0b0a8d56><div data-v-0b0a8d56><h1 data-v-0b0a8d56><span data-v-0b0a8d56>â‚¹</span>60000</h1><span data-v-0b0a8d56>Income</span></div><div data-v-0b0a8d56><span class="las la-wallet" style="color:white;" data-v-0b0a8d56></span></div></div></div>',1),Ot={class:"recent-grid"},Dt=(0,o.Fv)('<div class="projects" data-v-0b0a8d56><div class="card" data-v-0b0a8d56><div class="card-header" data-v-0b0a8d56><h2 data-v-0b0a8d56>Recent Activities</h2><button data-v-0b0a8d56>See all<span class="las la-arrow-right" data-v-0b0a8d56></span></button></div><div class="card-body" data-v-0b0a8d56><div class="table-responsive" data-v-0b0a8d56><table width="100%" data-v-0b0a8d56><thead data-v-0b0a8d56><tr data-v-0b0a8d56><td data-v-0b0a8d56>Product Title</td><td data-v-0b0a8d56>DepartMent</td><td data-v-0b0a8d56>Status</td></tr></thead><tbody data-v-0b0a8d56><tr data-v-0b0a8d56><td data-v-0b0a8d56>UI/UX Design</td><td data-v-0b0a8d56>UI Team</td><td data-v-0b0a8d56><span class="status purple" data-v-0b0a8d56></span>inprogress</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>Web development</td><td data-v-0b0a8d56>Ushop app</td><td data-v-0b0a8d56><span class="status pink" data-v-0b0a8d56></span>pending</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>UI/UX Design</td><td data-v-0b0a8d56>UI Team</td><td data-v-0b0a8d56><span class="status orange" data-v-0b0a8d56></span>inprogress</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>Web development</td><td data-v-0b0a8d56>Ushop app</td><td data-v-0b0a8d56><span class="status orange" data-v-0b0a8d56></span>pending</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>UI/UX Design</td><td data-v-0b0a8d56>UI Team</td><td data-v-0b0a8d56><span class="status orange" data-v-0b0a8d56></span>inprogress</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>Web development</td><td data-v-0b0a8d56>Ushop app</td><td data-v-0b0a8d56><span class="status orange" data-v-0b0a8d56></span>pending</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>UI/UX Design</td><td data-v-0b0a8d56>UI Team</td><td data-v-0b0a8d56><span class="status pink" data-v-0b0a8d56></span>inprogress</td></tr><tr data-v-0b0a8d56><td data-v-0b0a8d56>UI/UX Design</td><td data-v-0b0a8d56>UI Team</td><td data-v-0b0a8d56><span class="status purple" data-v-0b0a8d56></span>inprogress</td></tr></tbody></table></div></div></div></div>',1),At={class:"task-container"},Wt=jt((()=>(0,o.Lk)("div",{class:"task-header"},[(0,o.Lk)("h3",null,"Today's Tasks")],-1))),Mt={class:"task-body"},Kt={class:"todo-list"},Jt=jt((()=>(0,o.Lk)("span",{class:"las la-plus-circle plus-icon"},null,-1))),Qt=[Jt],Ht={class:"task-table"},Bt=jt((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{class:"task-name-cell"},"Task Name"),(0,o.Lk)("th",{class:"action-cell"},"Action")])],-1))),Vt={class:"task-name-cell"},$t={class:"action-cell"},zt=["onClick"],Yt=jt((()=>(0,o.Lk)("span",{class:"las la-minus-circle remove-btn"},null,-1))),Gt=[Yt];function Zt(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("body",null,[Rt,(0,o.bF)(d),(0,o.Lk)("div",Ft,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Dashboard"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[xt,(0,o.Lk)("div",Ot,[Dt,(0,o.Lk)("div",At,[Wt,(0,o.Lk)("div",Mt,[(0,o.Lk)("div",Kt,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"ðŸ“‘ Add a task","onUpdate:modelValue":t[0]||(t[0]=e=>l.newTaskName=e),class:"add-input"},null,512),[[s.Jo,l.newTaskName]]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.validateAndAddTask&&i.validateAndAddTask(...e)),class:"add-button"},Qt)]),(0,o.Lk)("table",Ht,[Bt,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.tasks,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e._id},[(0,o.Lk)("td",Vt,(0,n.v_)(e.taskName),1),(0,o.Lk)("td",$t,[(0,o.Lk)("button",{onClick:t=>i.removeTask(e._id),class:"remove-task-button"},Gt,8,zt)])])))),128))])])])])])])])])}const ea=e=>((0,o.Qi)("data-v-05796854"),e=e(),(0,o.jt)(),e),ta={class:"slidebar"},aa=ea((()=>(0,o.Lk)("div",{class:"slidebar-brand"},[(0,o.Lk)("h2",null,[(0,o.Lk)("span",{class:"las la-cube la-2x logo-icon"}),(0,o.eW)(),(0,o.Lk)("span",null,"BIT INVENTORY")])],-1))),sa={class:"sliderbar-menu"},ra=ea((()=>(0,o.Lk)("span",{class:"las la-igloo"},null,-1))),oa=ea((()=>(0,o.Lk)("span",null,"Dashboard",-1))),na=ea((()=>(0,o.Lk)("span",{class:"las la-user"},null,-1))),la=ea((()=>(0,o.Lk)("span",null,"Users",-1))),ia=ea((()=>(0,o.Lk)("span",{class:"las la-box"},null,-1))),da=ea((()=>(0,o.Lk)("span",null,"Product",-1))),ca=ea((()=>(0,o.Lk)("span",{class:"las la-thumbs-up"},null,-1))),ua=ea((()=>(0,o.Lk)("span",null,"Approval",-1))),pa=ea((()=>(0,o.Lk)("span",{class:"las la-exchange-alt"},null,-1))),ha=ea((()=>(0,o.Lk)("span",null,"Transferred",-1))),ma=ea((()=>(0,o.Lk)("span",{class:"las la-sort"},null,-1))),ka=ea((()=>(0,o.Lk)("span",null,"Arrange",-1))),fa=ea((()=>(0,o.Lk)("span",{class:"las la-shopping-bag"},null,-1))),ba=ea((()=>(0,o.Lk)("span",null,"Buy",-1))),va=ea((()=>(0,o.Lk)("span",{class:"las la-undo-alt"},null,-1))),La=ea((()=>(0,o.Lk)("span",null,"Returned",-1)));function ga(e,t,a,s,r,l){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ta,[aa,(0,o.Lk)("div",sa,[(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/inventory")})},[(0,o.bF)(i,{to:"/dashboard/inventory",onClick:t[0]||(t[0]=e=>l.setActive("/dashboard/inventory"))},{default:(0,o.k6)((()=>[ra,oa])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/users")})},[(0,o.bF)(i,{to:"/dashboard/users",onClick:t[1]||(t[1]=e=>l.setActive("/dashboard/users"))},{default:(0,o.k6)((()=>[na,la])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/product")})},[(0,o.bF)(i,{to:"/dashboard/product",onClick:t[2]||(t[2]=e=>l.setActive("/dashboard/product"))},{default:(0,o.k6)((()=>[ia,da])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/approval_inventory")})},[(0,o.bF)(i,{to:"/dashboard/approval_inventory",onClick:t[3]||(t[3]=e=>l.setActive("/dashboard/approval_inventory"))},{default:(0,o.k6)((()=>[ca,ua])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/transfered_inventory")})},[(0,o.bF)(i,{to:"/dashboard/transfered_inventory",onClick:t[4]||(t[4]=e=>l.setActive("/dashboard/transfered_inventory"))},{default:(0,o.k6)((()=>[pa,ha])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/Arrange_Product_Inventory")})},[(0,o.bF)(i,{to:"/dashboard/Arrange_Product_Inventory",onClick:t[5]||(t[5]=e=>l.setActive("/dashboard/Arrange_Product_Inventory"))},{default:(0,o.k6)((()=>[ma,ka])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/buy_product_inventory")})},[(0,o.bF)(i,{to:"/dashboard/buy_product_inventory",onClick:t[6]||(t[6]=e=>l.setActive("/dashboard/buy_product_inventory"))},{default:(0,o.k6)((()=>[fa,ba])),_:1})],2),(0,o.Lk)("li",{class:(0,n.C4)({active:l.isActive("/dashboard/Returned_Products")})},[(0,o.bF)(i,{to:"/dashboard/Returned_Products",onClick:t[7]||(t[7]=e=>l.setActive("/dashboard/Returned_Products"))},{default:(0,o.k6)((()=>[va,(0,o.eW)(),La])),_:1})],2)])])])}var ya={name:"SidebarMain",data(){return{activeItem:null}},methods:{setActive(e){this.activeItem=e},isActive(e){return this.$route.path===e}},watch:{$route(e){this.activeItem=e.path}}};const Pa=(0,P.A)(ya,[["render",ga],["__scopeId","data-v-05796854"]]);var wa=Pa;const Na=e=>((0,o.Qi)("data-v-4964fff1"),e=e(),(0,o.jt)(),e),Ca={class:"header-main"},Sa=Na((()=>(0,o.Lk)("label",{for:"nav-toggle"},[(0,o.Lk)("span",{class:"las la-bars",style:{"font-size":"2rem"}})],-1))),Ea={class:"user-wrapper"},_a=["src"],qa={class:"user-info"};function Ia(e,t,a,s,r,l){return(0,o.uX)(),(0,o.CE)("header",Ca,[(0,o.Lk)("h2",null,[Sa,(0,o.eW)(" "+(0,n.v_)(a.title),1)]),(0,o.Lk)("div",Ea,[(0,o.Lk)("img",{src:a.userProfile.profilePhoto,class:"img-inventory",width:"40px",height:"40px",alt:"Profile Photo"},null,8,_a),(0,o.Lk)("div",qa,[(0,o.Lk)("h4",null,(0,n.v_)(a.userName),1),(0,o.Lk)("small",null,(0,n.v_)(a.userRole),1)])])])}var Ta={name:"HeaderMain",props:{userProfile:{type:Object,required:!0},userName:{type:String,required:!0},userRole:{type:String,required:!0},title:{type:String,required:!0}}};const Ua=(0,P.A)(Ta,[["render",Ia],["__scopeId","data-v-4964fff1"]]);var Xa=Ua,ja={name:"DashboardInventory",components:{SidebarMain:wa,HeaderMain:Xa},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",title:"",tasks:[],newTaskName:"",email:""}},mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a,"Manager"!==a&&this.$router.push({name:"UnauthorizedPage"})})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchTasks()},methods:{validateAndAddTask(){""!==this.newTaskName.trim()&&this.addTask()},async fetchTasks(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch(`http://localhost:3000/getTasks?email=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await a.json();if(!a.ok)throw new Error(s.message||"Error fetching tasks");this.tasks=s.tasks}catch(e){console.error("Error fetching tasks:",e)}},async addTask(){try{const e=JSON.parse(sessionStorage.getItem("userData")),t=e.email,a=await fetch("http://localhost:3000/addTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskName:this.newTaskName,email:t})}),s=await a.json();if(!a.ok)throw new Error(s.message||"Error adding task");this.tasks.push(s.task),this.newTaskName=""}catch(e){console.error("Error adding task:",e)}},async removeTask(e){try{const t=JSON.parse(sessionStorage.getItem("userData")),a=t.email,s=await fetch("http://localhost:3000/removeTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e,email:a})});if(!s.ok)throw new Error("Error removing task");this.tasks=this.tasks.filter((t=>t._id!==e))}catch(t){console.error("Error removing task:",t)}}}};const Ra=(0,P.A)(ja,[["render",Zt],["__scopeId","data-v-0b0a8d56"]]);var Fa=Ra;const xa=e=>((0,o.Qi)("data-v-7492ee64"),e=e(),(0,o.jt)(),e),Oa={lang:"en"},Da=xa((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),Aa=xa((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),Wa={class:"main-content"},Ma={class:"table-responsive"},Ka={class:"container"},Ja={class:"search-bar-user"},Qa={class:"search-container"},Ha=xa((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),Ba={class:"table-container"},Va={class:"table"},$a=xa((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-key"}),(0,o.eW)(" ID Number")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-user"}),(0,o.eW)(" User Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-envelope"}),(0,o.eW)(" Email")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-building"}),(0,o.eW)(" Organization")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-shield-alt"}),(0,o.eW)(" Role")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-cogs"}),(0,o.eW)(" Action")])])],-1))),za=["onClick"],Ya=xa((()=>(0,o.Lk)("i",{class:"fas fa-trash-alt"},null,-1))),Ga=[Ya],Za={key:0,class:"popup-overlay"};function es(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("user-registration-form");return(0,o.uX)(),(0,o.CE)("html",Oa,[Da,(0,o.Lk)("body",null,[Aa,(0,o.bF)(d),(0,o.Lk)("div",Wa,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Users"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",Ma,[(0,o.Lk)("div",Ka,[(0,o.Lk)("div",Ja,[(0,o.Lk)("div",Qa,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Ha]),(0,o.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>i.openPopup&&i.openPopup(...e))},"Add User")]),(0,o.Lk)("div",Ba,[(0,o.Lk)("table",Va,[$a,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredUsers,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,n.v_)(e.idNumber),1),(0,o.Lk)("td",null,(0,n.v_)(e.username),1),(0,o.Lk)("td",null,(0,n.v_)(e.email),1),(0,o.Lk)("td",null,(0,n.v_)(e.organization),1),(0,o.Lk)("td",null,(0,n.v_)(e.role),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{onClick:t=>i.removeUser(e._id),class:"remove-btn"},Ga,8,za)])])))),128))])])])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Za,[(0,o.bF)(u,{onClose:i.closePopup},null,8,["onClose"])])):(0,o.Q3)("",!0)])}var ts=a.p+"img/person.9ba1d1b6.png",as=a.p+"img/email.ad31f58c.png",ss=a.p+"img/id.13954cfe.png",rs=a.p+"img/phone.b55733d2.png",os=a.p+"img/dep.2846a29f.png",ns=a.p+"img/role.e7c6ac5a.png";const ls=e=>((0,o.Qi)("data-v-f731a098"),e=e(),(0,o.jt)(),e),is={key:0,class:"popup"},ds={class:"header-container"},cs=ls((()=>(0,o.Lk)("h2",null,"User Registration",-1))),us=ls((()=>(0,o.Lk)("i",{class:"fas fa-times"},null,-1))),ps=[us],hs={class:"main-user-info"},ms={class:"user-input-box"},ks=ls((()=>(0,o.Lk)("label",{for:"username",class:"label-wrapper"},[(0,o.Lk)("img",{src:ts,alt:"Username Icon",class:"label-icon"}),(0,o.Lk)("span",null,"Username")],-1))),fs={class:"user-input-box"},bs=ls((()=>(0,o.Lk)("label",{for:"email",class:"label-wrapper"},[(0,o.Lk)("img",{src:as,alt:"Email Icon",class:"label-icon"}),(0,o.Lk)("span",null,"Email")],-1))),vs={class:"user-input-box"},Ls=ls((()=>(0,o.Lk)("label",{for:"idNumber",class:"label-wrapper"},[(0,o.Lk)("img",{src:ss,alt:"ID Number Icon",class:"label-icon"}),(0,o.Lk)("span",null,"ID Number")],-1))),gs={class:"user-input-box"},ys=ls((()=>(0,o.Lk)("label",{for:"phoneNumber",class:"label-wrapper"},[(0,o.Lk)("img",{src:rs,alt:"Phone Number Icon",class:"label-icon"}),(0,o.Lk)("span",null,"Phone Number")],-1))),Ps={class:"user-input-box"},ws=ls((()=>(0,o.Lk)("label",{for:"organization",class:"label-wrapper"},[(0,o.Lk)("img",{src:os,alt:"Organization Icon",class:"label-icon"}),(0,o.Lk)("span",null,"Organization")],-1))),Ns=(0,o.Fv)('<option value="" disabled selected data-v-f731a098>Select Organization</option><option value="Department" data-v-f731a098>Department</option><option value="Special Labs" data-v-f731a098>Special Labs</option><option value="Inventory" data-v-f731a098>Inventory</option><option value="Transports" data-v-f731a098>Transports</option>',5),Cs=[Ns],Ss={key:0,class:"user-input-box"},Es=ls((()=>(0,o.Lk)("label",{for:"departmentName",class:"label-wrapper"},[(0,o.Lk)("span",null,"Department Name")],-1))),_s=ls((()=>(0,o.Lk)("option",{value:"",disabled:"",selected:""},"Select Department Name",-1))),qs=["value"],Is={key:1,class:"user-input-box"},Ts=ls((()=>(0,o.Lk)("label",{for:"specialLabName",class:"label-wrapper"},[(0,o.Lk)("span",null,"Special Lab Name")],-1))),Us=ls((()=>(0,o.Lk)("option",{value:"",disabled:"",selected:""},"Select Special Lab Name",-1))),Xs=["value"],js={class:"user-input-box"},Rs=ls((()=>(0,o.Lk)("label",{for:"role",class:"label-wrapper"},[(0,o.Lk)("img",{src:ns,alt:"Role Icon",class:"label-icon"}),(0,o.Lk)("span",null,"Role")],-1))),Fs=ls((()=>(0,o.Lk)("option",{value:"",disabled:"",selected:""},"Select Role",-1))),xs=["value"],Os={class:"user-input-box"},Ds=ls((()=>(0,o.Lk)("label",{for:"permission",class:"label-wrapper"},[(0,o.Lk)("img",{src:ns,alt:"Role Icon",class:"label-icon"}),(0,o.Lk)("span",null,"Permission For all Products")],-1))),As=ls((()=>(0,o.Lk)("option",{value:"",disabled:"",selected:""},"Select Permission",-1))),Ws=["value"],Ms=ls((()=>(0,o.Lk)("div",{class:"form-submit-btn"},[(0,o.Lk)("button",{type:"submit"},"Register")],-1))),Ks={key:1,class:"custom-popup"};function Js(e,t,a,r,l,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[l.showPopup?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",is,[(0,o.Lk)("div",ds,[cs,(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>i.closePopup&&i.closePopup(...e))},ps)]),(0,o.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o.Lk)("div",hs,[(0,o.Lk)("div",ms,[ks,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"username",name:"username",placeholder:"Enter Username","onUpdate:modelValue":t[1]||(t[1]=e=>l.username=e),required:""},null,512),[[s.Jo,l.username]])]),(0,o.Lk)("div",fs,[bs,(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email",name:"email",placeholder:"Enter Email","onUpdate:modelValue":t[2]||(t[2]=e=>l.email=e),required:""},null,512),[[s.Jo,l.email]])]),(0,o.Lk)("div",vs,[Ls,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"idNumber",name:"idNumber",placeholder:"Enter ID Number","onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),required:""},null,512),[[s.Jo,l.idNumber]])]),(0,o.Lk)("div",gs,[ys,(0,o.bo)((0,o.Lk)("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",placeholder:"Enter Phone Number","onUpdate:modelValue":t[4]||(t[4]=e=>l.phoneNumber=e),pattern:"[0-9]{10}",title:"Please enter a 10-digit phone number",required:""},null,512),[[s.Jo,l.phoneNumber]])]),(0,o.Lk)("div",Ps,[ws,(0,o.bo)((0,o.Lk)("select",{id:"organization",name:"organization",class:"styled-select",required:"","onUpdate:modelValue":t[5]||(t[5]=e=>l.organization=e),onChange:t[6]||(t[6]=(...e)=>i.handleOrganizationChange&&i.handleOrganizationChange(...e))},Cs,544),[[s.u1,l.organization]])]),"Department"===l.organization?((0,o.uX)(),(0,o.CE)("div",Ss,[Es,(0,o.bo)((0,o.Lk)("select",{id:"departmentName",name:"departmentName",class:"styled-select",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>l.departmentName=e)},[_s,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.departmentOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,n.v_)(e),9,qs)))),128))],512),[[s.u1,l.departmentName]])])):(0,o.Q3)("",!0),"Special Labs"===l.organization?((0,o.uX)(),(0,o.CE)("div",Is,[Ts,(0,o.bo)((0,o.Lk)("select",{id:"specialLabName",name:"specialLabName",class:"styled-select",required:"","onUpdate:modelValue":t[8]||(t[8]=e=>l.specialLabName=e)},[Us,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.specialLabOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Xs)))),128))],512),[[s.u1,l.specialLabName]])])):(0,o.Q3)("",!0),(0,o.Lk)("div",js,[Rs,(0,o.bo)((0,o.Lk)("select",{id:"role",name:"role",class:"styled-select",required:"","onUpdate:modelValue":t[9]||(t[9]=e=>l.role=e)},[Fs,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.roleOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,xs)))),128))],512),[[s.u1,l.role]])]),(0,o.Lk)("div",Os,[Ds,(0,o.bo)((0,o.Lk)("select",{id:"permission",name:"permission",class:"styled-select",required:"","onUpdate:modelValue":t[10]||(t[10]=e=>l.permission=e)},[As,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.permissionOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,Ws)))),128))],512),[[s.u1,l.permission]])])]),Ms],32)])),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Ks,[(0,o.Lk)("p",null,(0,n.v_)(l.successMessage),1),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closePopup&&i.closePopup(...e))},"Close")])):(0,o.Q3)("",!0)],64)}var Qs={data(){return{username:"",email:"",idNumber:"",phoneNumber:"",organization:"",role:"",departmentName:"",specialLabName:"",roleOptions:[{value:"Manager",label:"Manager"},{value:"Head",label:"Head"},{value:"Member",label:"Member"}],permission:"",permissionOptions:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],departmentOptions:[],specialLabOptions:[],successMessage:"",showPopup:!1}},methods:{async handleSubmit(){try{const e=await fetch("http://localhost:3000/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,email:this.email,idNumber:this.idNumber,phoneNumber:this.phoneNumber,organization:this.organization,specialLabName:this.specialLabName,role:this.role,departmentName:this.departmentName,permission:this.permission})});e.ok?this.showSuccessPopup("Registration successful!"):console.error("Registration failed:",e.statusText)}catch(e){console.error("Error submitting registration:",e)}},showSuccessPopup(e){this.successMessage=e,this.showPopup=!0},closePopup(){this.showPopup=!1,window.location.reload()},async fetchOptions(){try{const e=await fetch("/departments.json"),t=await e.json();"Department"===this.organization?this.departmentOptions=t.Department||[]:"Special Labs"===this.organization&&(this.specialLabOptions=t["Special Labs"]||[])}catch(e){console.error("Error fetching department data:",e)}},handleOrganizationChange(){"Inventory"===this.organization?(this.roleOptions=[{value:"Manager",label:"Manager"}],this.role="Manager"):(this.roleOptions=[{value:"Head",label:"Head"},{value:"Member",label:"Member"}],this.role=""),this.fetchOptions()}}};const Hs=(0,P.A)(Qs,[["render",Js],["__scopeId","data-v-f731a098"]]);var Bs=Hs,Vs={name:"ViewUsers",components:{SidebarMain:wa,HeaderMain:Xa,UserRegistrationForm:Bs},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",title:"",users:[],showPopup:!1,newUser:{username:"",email:""},searchKeyword:""}},mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchUserData()},computed:{filteredUsers(){return this.users.filter((e=>e.idNumber.toString().includes(this.searchKeyword.toLowerCase())||e.username.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.email.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.organization.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.role.toLowerCase().includes(this.searchKeyword.toLowerCase())))}},methods:{async fetchUserData(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/registrations",{method:"GET",headers:{"Content-Type":"application/json","user-email":e.email}});if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();this.users=a}else console.error("User data not found in sessionStorage")}catch(e){console.error("Error fetching user data:",e)}},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1},async removeUser(e){try{const t=await fetch(`http://localhost:3000/removeUser/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Network response was not ok");const a=await t.text();console.log(a),this.users=this.users.filter((t=>t._id!==e))}catch(t){console.error("Error removing user:",t)}}}};const $s=(0,P.A)(Vs,[["render",es],["__scopeId","data-v-7492ee64"]]);var zs=$s;const Ys=e=>((0,o.Qi)("data-v-26ca7589"),e=e(),(0,o.jt)(),e),Gs={lang:"en"},Zs=Ys((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),er=Ys((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),tr={class:"main-content"},ar={class:"table-responsive"},sr={class:"container"},rr={class:"search-bar-product"},or={class:"product-container"},nr=Ys((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),lr={class:"button-container"},ir=Ys((()=>(0,o.Lk)("span",{class:"las fa-box",style:{"margin-right":"10px"}},null,-1))),dr=Ys((()=>(0,o.Lk)("i",{class:"fas fa-file-excel mr-1"},null,-1))),cr=Ys((()=>(0,o.Lk)("i",{class:"fas fa-file-import mr-1"},null,-1))),ur={class:"table-container"},pr={class:"table"},hr=Ys((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-id-badge mr-1"}),(0,o.eW)(" Product ID")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-image mr-1"}),(0,o.eW)(" Product Image")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-building mr-1"}),(0,o.eW)(" Company")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sitemap mr-1"}),(0,o.eW)(" Department")]),(0,o.Lk)("th",{class:"description-column"},[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Description ")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-cogs mr-1"}),(0,o.eW)(" Action")])])],-1))),mr={key:0},kr={style:{color:"rgb(61, 61, 190)"}},fr=["src","alt"],br={class:"description-column"},vr={key:0},Lr={key:0},gr=["onClick"],yr=Ys((()=>(0,o.Lk)("div",{style:{color:"blueviolet"}},"Read more",-1))),Pr=[yr],wr={key:1},Nr=["onClick"],Cr=Ys((()=>(0,o.Lk)("div",{style:{color:"blueviolet"}},"Show less",-1))),Sr=[Cr],Er={key:1},_r=["onClick"],qr=Ys((()=>(0,o.Lk)("i",{class:"fas fa-edit mr-1"},null,-1))),Ir={key:1},Tr=Ys((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"8",style:{"text-align":"center"}},"No data available")],-1))),Ur=[Tr],Xr={key:0,class:"popup-overlay"},jr={key:1,class:"popup-overlay"};function Rr(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("ProductRegisteration"),p=(0,o.g2)("ProductImport");return(0,o.uX)(),(0,o.CE)("html",Gs,[Zs,(0,o.Lk)("body",null,[er,(0,o.bF)(d),(0,o.Lk)("div",tr,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Product Lists"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",ar,[(0,o.Lk)("div",sr,[(0,o.Lk)("div",rr,[(0,o.Lk)("div",or,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),nr]),(0,o.Lk)("div",lr,[(0,o.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>i.openPopup&&i.openPopup(...e))},[ir,(0,o.eW)("Add Product ")]),(0,o.Lk)("button",{class:"export-btn",onClick:t[2]||(t[2]=(...e)=>i.exportData&&i.exportData(...e))},[dr,(0,o.eW)("Export ")]),(0,o.Lk)("button",{class:"import-btn",onClick:t[3]||(t[3]=(...e)=>i.openImportPopup&&i.openImportPopup(...e))},[cr,(0,o.eW)("Import ")])])]),(0,o.Lk)("div",ur,[(0,o.Lk)("table",pr,[hr,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",mr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",kr,(0,n.v_)(e.productId),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.getProductImageUrl(e.productId),alt:e.productName,style:{"max-width":"100px"}},null,8,fr)]),(0,o.Lk)("td",null,(0,n.v_)(e.company),1),(0,o.Lk)("td",null,(0,n.v_)(e.department),1),(0,o.Lk)("td",br,[e.description.length>70?((0,o.uX)(),(0,o.CE)("div",vr,[e.showFullDescription?((0,o.uX)(),(0,o.CE)("div",wr,[(0,o.eW)((0,n.v_)(e.description)+" ",1),(0,o.Lk)("span",{onClick:e=>i.toggleDescription(t)},Sr,8,Nr)])):((0,o.uX)(),(0,o.CE)("div",Lr,[(0,o.eW)((0,n.v_)(e.description.slice(0,70))+"... ",1),(0,o.Lk)("span",{onClick:e=>i.toggleDescription(t)},Pr,8,gr)]))])):((0,o.uX)(),(0,o.CE)("div",Er,(0,n.v_)(e.description),1))]),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"edit",onClick:t=>i.openEditForm(e.productId)},[qr,(0,o.eW)("Edit ")],8,_r)])])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Ir,Ur))])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Xr,[(0,o.bF)(u,{isEditing:l.isEditing,editingProductId:l.editingProductId,onClose:i.closePopup},null,8,["isEditing","editingProductId","onClose"])])):(0,o.Q3)("",!0),l.showImportPopup?((0,o.uX)(),(0,o.CE)("div",jr,[(0,o.bF)(p,{onClose:i.closeImportPopup,onRefresh:i.fetchProducts},null,8,["onClose","onRefresh"])])):(0,o.Q3)("",!0)])])}var Fr=a(3959);const xr=e=>((0,o.Qi)("data-v-518df14c"),e=e(),(0,o.jt)(),e),Or={key:0,class:"popup"},Dr={class:"header-container"},Ar=xr((()=>(0,o.Lk)("i",{class:"fas fa-times"},null,-1))),Wr=[Ar],Mr={class:"main-product-info"},Kr={class:"product-input-box"},Jr=xr((()=>(0,o.Lk)("label",{for:"productId",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-id-card-alt icon"}),(0,o.Lk)("span",null,"Product ID")],-1))),Qr={class:"product-input-box"},Hr=xr((()=>(0,o.Lk)("label",{for:"productName",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-tag icon"}),(0,o.Lk)("span",null,"Product Name")],-1))),Br={class:"product-input-box"},Vr=xr((()=>(0,o.Lk)("label",{for:"company",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-building icon"}),(0,o.Lk)("span",null,"Company")],-1))),$r={class:"product-input-box"},zr=xr((()=>(0,o.Lk)("label",{for:"description",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-file-alt icon"}),(0,o.Lk)("span",null,"Description")],-1))),Yr={class:"product-input-box"},Gr=xr((()=>(0,o.Lk)("label",{for:"quantity",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-boxes icon"}),(0,o.Lk)("span",null,"Quantity")],-1))),Zr={class:"product-input-box"},eo=xr((()=>(0,o.Lk)("label",{for:"department",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-sitemap icon"}),(0,o.Lk)("span",null,"Department")],-1))),to=["value"],ao={class:"product-input-box"},so=xr((()=>(0,o.Lk)("label",{for:"productImage",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-image icon"}),(0,o.Lk)("span",null,"Product Image")],-1))),ro={class:"image-preview-container"},oo=["src"],no={key:1},lo=xr((()=>(0,o.Lk)("label",{for:"file-upload",class:"custom-file-label"},"Upload Image",-1))),io={class:"form-submit-btn"},co={type:"submit"},uo={key:1,class:"custom-popup"};function po(e,t,a,r,l,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[l.showPopup?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Or,[(0,o.Lk)("div",Dr,[(0,o.Lk)("h2",null,(0,n.v_)(a.isEditing?"Edit Product":"New Product"),1),(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>i.closePopup&&i.closePopup(...e))},Wr)]),(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o.Lk)("div",Mr,[(0,o.Lk)("div",Kr,[Jr,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"productId",name:"productId",placeholder:"Enter Product ID","onUpdate:modelValue":t[1]||(t[1]=e=>l.productId=e),required:""},null,512),[[s.Jo,l.productId]])]),(0,o.Lk)("div",Qr,[Hr,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"productName",name:"productName",placeholder:"Enter Product Name","onUpdate:modelValue":t[2]||(t[2]=e=>l.productName=e),required:""},null,512),[[s.Jo,l.productName]])]),(0,o.Lk)("div",Br,[Vr,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"company",name:"company",placeholder:"Enter Company","onUpdate:modelValue":t[3]||(t[3]=e=>l.company=e),required:""},null,512),[[s.Jo,l.company]])]),(0,o.Lk)("div",$r,[zr,(0,o.bo)((0,o.Lk)("textarea",{id:"description",name:"description",placeholder:"Enter Description (Minimum 50 words)","onUpdate:modelValue":t[4]||(t[4]=e=>l.description=e),required:"",minlength:"50",rows:"4"},null,512),[[s.Jo,l.description]])]),(0,o.Lk)("div",Yr,[Gr,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"quantity",name:"quantity",placeholder:"Enter Quantity","onUpdate:modelValue":t[5]||(t[5]=e=>l.quantity=e),required:""},null,512),[[s.Jo,l.quantity]])]),(0,o.Lk)("div",Zr,[eo,(0,o.bo)((0,o.Lk)("select",{id:"department",name:"department","onUpdate:modelValue":t[6]||(t[6]=e=>l.department=e),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.departmentOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,n.v_)(e),9,to)))),128))],512),[[s.u1,l.department]])]),(0,o.Lk)("div",ao,[so,(0,o.Lk)("div",ro,[l.imageUrl?((0,o.uX)(),(0,o.CE)("img",{key:0,src:l.imageUrl,alt:"Product Image",class:"image-preview"},null,8,oo)):((0,o.uX)(),(0,o.CE)("span",no,"No image uploaded"))]),lo,(0,o.Lk)("input",{type:"file",id:"file-upload",class:"custom-file-input",name:"productImage",accept:"image/*",onChange:t[7]||(t[7]=(...e)=>i.handleImageUpload&&i.handleImageUpload(...e)),required:""},null,32)])]),(0,o.Lk)("div",io,[(0,o.Lk)("button",co,(0,n.v_)(a.isEditing?"Update Product":"Add New Product"),1)])],32)])),l.showPopup?((0,o.uX)(),(0,o.CE)("div",uo,[(0,o.Lk)("p",null,(0,n.v_)(l.successMessage),1),(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.closePopup&&i.closePopup(...e))},"Close")])):(0,o.Q3)("",!0)],64)}a(4603),a(7566),a(8721);var ho={name:"ProductRegistration",props:{isEditing:Boolean,editingProductId:String},data(){return{productId:"",productName:"",company:"",description:"",quantity:"",productImage:null,successMessage:"",showPopup:!1,imageUrl:"",department:"",departmentOptions:[]}},methods:{async fetchOptions(){try{const e=await fetch("/departments.json"),t=await e.json();this.departmentOptions=t.Department||[]}catch(e){console.error("Error fetching department data:",e)}},handleImageUpload(e){const t=e.target.files[0];t&&(this.imageUrl=URL.createObjectURL(t),this.productImage=t)},async handleSubmit(){const e=new FormData;e.append("productId",this.productId),e.append("productName",this.productName),e.append("company",this.company),e.append("description",this.description),e.append("quantity",this.quantity),e.append("department",this.department),this.productImage&&e.append("productImage",this.productImage);try{const t=this.isEditing?`http://localhost:3000/products/${this.productId}`:"http://localhost:3000/products",a=this.isEditing?"PUT":"POST",s=await fetch(t,{method:a,body:e}),r=await s.json();s.ok?this.showSuccessPopup(this.isEditing?"Product updated successfully":"Product added successfully"):console.error("Error:",r)}catch(t){console.error("Error submitting form:",t)}},showSuccessPopup(e){this.successMessage=e,this.showPopup=!0},closePopup(){this.showPopup=!1,this.$emit("close"),this.resetForm()},resetForm(){this.productId="",this.productName="",this.company="",this.description="",this.quantity="",this.productImage=null,this.imageUrl="",this.department=""},async fetchProductData(e){try{const t=await fetch(`http://localhost:3000/oldproductdata/${e}`),a=await t.json();this.productId=a.productId,this.productName=a.productName,this.company=a.company,this.description=a.description,this.quantity=a.quantity,this.department=a.department,this.imageUrl=`http://localhost:3000/products/images/${e}`}catch(t){console.error("Error fetching product data:",t)}}},created(){this.fetchOptions(),this.isEditing&&this.fetchProductData(this.editingProductId)}};const mo=(0,P.A)(ho,[["render",po],["__scopeId","data-v-518df14c"]]);var ko=mo;const fo=e=>((0,o.Qi)("data-v-5c9d8a0c"),e=e(),(0,o.jt)(),e),bo={class:"popup-overlay"},vo={class:"popup-content"},Lo=fo((()=>(0,o.Lk)("h2",null,"Import Products",-1))),go=fo((()=>(0,o.Lk)("label",{for:"file-input",class:"custom-file-input"}," Choose File ",-1))),yo={key:0,class:"file-name"},Po={key:1},wo=fo((()=>(0,o.Lk)("h3",null,"Preview",-1))),No=fo((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Product ID"),(0,o.Lk)("th",null,"Product Name"),(0,o.Lk)("th",null,"Company"),(0,o.Lk)("th",null,"Description"),(0,o.Lk)("th",null,"Quantity"),(0,o.Lk)("th",null,"Department")])],-1)));function Co(e,t,a,s,r,l){return(0,o.uX)(),(0,o.CE)("div",bo,[(0,o.Lk)("div",vo,[Lo,go,(0,o.Lk)("input",{id:"file-input",type:"file",onChange:t[0]||(t[0]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:".xlsx, .xls"},null,32),r.file?((0,o.uX)(),(0,o.CE)("span",yo,(0,n.v_)(r.file.name),1)):(0,o.Q3)("",!0),r.previewData.length>0?((0,o.uX)(),(0,o.CE)("div",Po,[wo,(0,o.Lk)("table",null,[No,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.previewData,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,n.v_)(e["Product ID"]),1),(0,o.Lk)("td",null,(0,n.v_)(e["Product Name"]),1),(0,o.Lk)("td",null,(0,n.v_)(e["Company"]),1),(0,o.Lk)("td",null,(0,n.v_)(e["Description"]),1),(0,o.Lk)("td",null,(0,n.v_)(e["Quantity"]),1),(0,o.Lk)("td",null,(0,n.v_)(e["Department"]),1)])))),128))])])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.importProducts&&l.importProducts(...e))},"Import"),(0,o.Lk)("button",{class:"close-btn",onClick:t[2]||(t[2]=(...e)=>l.close&&l.close(...e))},"Close")])])}a(6573),a(8100),a(7936),a(7467),a(4732),a(9577);var So={data(){return{file:null,previewData:[]}},methods:{handleFileUpload(e){this.file=e.target.files[0];const t=new FileReader;t.onload=e=>{const t=new Uint8Array(e.target.result),a=Fr.LF(t,{type:"array"}),s=a.SheetNames[0],r=a.Sheets[s];this.previewData=Fr.Wp.sheet_to_json(r)},t.readAsArrayBuffer(this.file)},async importProducts(){if(!this.file)return void alert("No file selected.");const e=new FormData;e.append("file",this.file);try{const t=await fetch("http://localhost:3000/import-products",{method:"POST",body:e});if(t.ok)alert("Products imported successfully"),this.$emit("close"),this.$emit("refresh");else{const e=await t.json();alert(`Error importing products: ${e.error}`)}}catch(t){console.error("Error:",t),alert("Error importing products")}},close(){this.$emit("close")}}};const Eo=(0,P.A)(So,[["render",Co],["__scopeId","data-v-5c9d8a0c"]]);var _o=Eo,qo={name:"Product_list",components:{SidebarMain:wa,HeaderMain:Xa,ProductRegisteration:ko,ProductImport:_o},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",title:"Product Lists",products:[],showPopup:!1,showImportPopup:!1,searchKeyword:"",editingProductId:null,isEditing:!1}},async mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchProducts()},computed:{filteredProducts(){return this.products.filter((e=>e.productId.toString().toLowerCase().includes(this.searchKeyword.toLowerCase())||e.productName.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.company.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.description.toLowerCase().includes(this.searchKeyword.toLowerCase())))}},methods:{openEditForm(e){this.editingProductId=e,this.isEditing=!0,this.showPopup=!0},async fetchProducts(){try{const e=await fetch("http://localhost:3000/products"),t=await e.json();this.products=t.map((e=>e))}catch(e){console.error("Error fetching products:",e)}},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1},openImportPopup(){this.showImportPopup=!0},closeImportPopup(){this.showImportPopup=!1},getProductImageUrl(e){return`http://localhost:3000/products/images/${e}`},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription},exportData(){if(this.products.length>0){const e=this.products.map((e=>{const{productId:t,productName:a,company:s,department:r,description:o,quantity:n}=e,l=this.getProductImageUrl(e.productId);return{productId:t,productName:a,company:s,department:r,description:o,quantity:n,imageUrl:l}})),t=Fr.Wp.json_to_sheet(e),a=Fr.Wp.book_new();Fr.Wp.book_append_sheet(a,t,"Product Data"),(0,Fr._h)(a,"product_data.xlsx")}else console.error("No data available to export.")}}};const Io=(0,P.A)(qo,[["render",Rr],["__scopeId","data-v-26ca7589"]]);var To=Io,Uo=a.p+"img/unauthorized.b4434369.jpg";const Xo=e=>((0,o.Qi)("data-v-9171790a"),e=e(),(0,o.jt)(),e),jo={class:"wrapper"},Ro=Xo((()=>(0,o.Lk)("h1",{class:"title"},"Login Failed",-1))),Fo=Xo((()=>(0,o.Lk)("div",{class:"image-container"},[(0,o.Lk)("img",{src:Uo,alt:"Email error",class:"error-image"})],-1))),xo={class:"text-container"},Oo={class:"message"},Do={class:"email-highlight"},Ao=Xo((()=>(0,o.Lk)("p",{class:"hint"},"Please check your email or sign up for a new account.",-1))),Wo={class:"button-group"};function Mo(e,t,a,s,r,l){return(0,o.uX)(),(0,o.CE)("div",jo,[Ro,Fo,(0,o.Lk)("div",xo,[(0,o.Lk)("p",Oo,[(0,o.eW)("The email address "),(0,o.Lk)("span",Do,(0,n.v_)(a.attemptedEmail),1),(0,o.eW)(" is not registered.")]),Ao]),(0,o.Lk)("div",Wo,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.goToSignup&&l.goToSignup(...e)),class:"action-button signup-button"},"Sign Up Now")])])}var Ko={name:"LoginErrorPage",props:{attemptedEmail:{type:String,default:"example@domain.com"}},methods:{goToSignup(){this.$router.push("/signup")},goToLogin(){this.$router.push("/login")}}};const Jo=(0,P.A)(Ko,[["render",Mo],["__scopeId","data-v-9171790a"]]);var Qo=Jo;const Ho=e=>((0,o.Qi)("data-v-3c9bd35c"),e=e(),(0,o.jt)(),e),Bo={lang:"en"},Vo=Ho((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),$o=Ho((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),zo={class:"main-content"},Yo={class:"table-responsive"},Go={class:"container"},Zo={class:"search-bar-product"},en={class:"product-container"},tn=Ho((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),an={class:"button-container"},sn=Ho((()=>(0,o.Lk)("i",{class:"las la-paper-plane mr-2"},null,-1))),rn={class:"table-container"},on={class:"table"},nn=Ho((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-id-badge mr-1"}),(0,o.eW)(" Product ID")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-image mr-1"}),(0,o.eW)(" Product Image")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-building mr-1"}),(0,o.eW)(" Company")]),(0,o.Lk)("th",{class:"description-column"},[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Description ")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")])])],-1))),ln={key:0},dn={style:{color:"rgb(61, 61, 190)"}},cn=["src","alt"],un={class:"description-column"},pn={key:0},hn={key:0},mn=["onClick"],kn=Ho((()=>(0,o.Lk)("div",{style:{color:"blueviolet"}},"Read more",-1))),fn=[kn],bn={key:1},vn=["onClick"],Ln=Ho((()=>(0,o.Lk)("div",{style:{color:"blueviolet"}},"Show less",-1))),gn=[Ln],yn={key:1},Pn={key:1},wn=Ho((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"7",style:{"text-align":"center"}},"No data available")],-1))),Nn=[wn],Cn={key:0,class:"popup-overlay"};function Sn(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("ProductRequest");return(0,o.uX)(),(0,o.CE)("html",Bo,[Vo,(0,o.Lk)("body",null,[$o,(0,o.bF)(d),(0,o.Lk)("div",zo,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Product Lists"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",Yo,[(0,o.Lk)("div",Go,[(0,o.Lk)("div",Zo,[(0,o.Lk)("div",en,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),tn]),(0,o.Lk)("div",an,[(0,o.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>i.openPopup&&i.openPopup(...e))},[sn,(0,o.eW)(" Request Product ")])])]),(0,o.Lk)("div",rn,[(0,o.Lk)("table",on,[nn,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",ln,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",dn,(0,n.v_)(e.productId),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.getProductImageUrl(e.productId),alt:e.productName,style:{"max-width":"100px"}},null,8,cn)]),(0,o.Lk)("td",null,(0,n.v_)(e.company),1),(0,o.Lk)("td",un,[e.description.length>70?((0,o.uX)(),(0,o.CE)("div",pn,[e.showFullDescription?((0,o.uX)(),(0,o.CE)("div",bn,[(0,o.eW)((0,n.v_)(e.description)+" ",1),(0,o.Lk)("span",{onClick:e=>i.toggleDescription(t)},gn,8,vn)])):((0,o.uX)(),(0,o.CE)("div",hn,[(0,o.eW)((0,n.v_)(e.description.slice(0,70))+"... ",1),(0,o.Lk)("span",{onClick:e=>i.toggleDescription(t)},fn,8,mn)]))])):((0,o.uX)(),(0,o.CE)("div",yn,(0,n.v_)(e.description),1))]),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1)])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Pn,Nn))])])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Cn,[(0,o.bF)(u,{onClose:i.closePopup},null,8,["onClose"])])):(0,o.Q3)("",!0)])}const En=e=>((0,o.Qi)("data-v-0c2b048c"),e=e(),(0,o.jt)(),e),_n={key:0,class:"popup"},qn={class:"header-container"},In=En((()=>(0,o.Lk)("h2",null,"Request Product",-1))),Tn=En((()=>(0,o.Lk)("i",{class:"fas fa-times"},null,-1))),Un=[Tn],Xn={class:"product-input-box"},jn=En((()=>(0,o.Lk)("label",{for:"productName",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-tag icon mr-1"}),(0,o.Lk)("span",null,"Product Name")],-1))),Rn=En((()=>(0,o.Lk)("i",{class:"fas fa-tools"},null,-1))),Fn={key:0,class:"suggestions-list"},xn=["onClick"],On=En((()=>(0,o.Lk)("strong",null,[(0,o.Lk)("i",{class:"fas fa-bookmark icon mr-1"}),(0,o.eW)("Name:")],-1))),Dn=En((()=>(0,o.Lk)("strong",null,[(0,o.Lk)("i",{class:"fas fa-key icon mr-1"}),(0,o.eW)("ID:")],-1))),An={class:"selected-products-box"},Wn=["onClick"],Mn=En((()=>(0,o.Lk)("i",{class:"fas fa-times cross-icon"},null,-1))),Kn=[Mn],Jn={class:"product-input-box"},Qn=En((()=>(0,o.Lk)("label",{for:"reason",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-comment mr-1"}),(0,o.Lk)("span",null,"Reason")],-1))),Hn={class:"product-input-box"},Bn=En((()=>(0,o.Lk)("label",{for:"quantity",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-sort-numeric-up mr-1"}),(0,o.Lk)("span",null,"Quantity")],-1))),Vn={class:"product-input-box"},$n=En((()=>(0,o.Lk)("label",{for:"budget",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-money-bill-alt mr-1"}),(0,o.Lk)("span",null,"Budget")],-1))),zn=En((()=>(0,o.Lk)("div",{class:"form-submit-btn"},[(0,o.Lk)("button",{type:"submit"},[(0,o.Lk)("i",{class:"fas fa-plus-circle"}),(0,o.eW)(" Add Request")])],-1))),Yn={key:1,class:"custom-popup"};function Gn(e,t,a,r,l,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[l.showPopup?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",_n,[(0,o.Lk)("div",qn,[In,(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>i.closePopup&&i.closePopup(...e))},Un)]),(0,o.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o.Lk)("div",Xn,[jn,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"productName",name:"productName",placeholder:"Enter Product Name","onUpdate:modelValue":t[1]||(t[1]=e=>l.productName=e),onInput:t[2]||(t[2]=(...e)=>i.getProductSuggestions&&i.getProductSuggestions(...e))},null,544),[[s.Jo,l.productName]]),(0,o.Lk)("button",{type:"button",class:"manual-btn",onClick:t[3]||(t[3]=(...e)=>i.addManualProduct&&i.addManualProduct(...e))},[Rn,(0,o.eW)(" Manual ")]),l.showSuggestions?((0,o.uX)(),(0,o.CE)("ul",Fn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.suggestedProducts,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e._id,onClick:t=>i.addProduct(e)},[(0,o.Lk)("div",null,[(0,o.Lk)("span",null,[On,(0,o.eW)(" "+(0,n.v_)(e.productName),1)]),(0,o.Lk)("span",null,[Dn,(0,o.eW)(" "+(0,n.v_)(e.productId),1)])])],8,xn)))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",An,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.selectedProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"selected-product-item"},[(0,o.eW)((0,n.v_)(e.productName)+" ",1),(0,o.Lk)("button",{type:"button",onClick:e=>i.removeProduct(t)},Kn,8,Wn)])))),128))]),(0,o.Lk)("div",Jn,[Qn,(0,o.bo)((0,o.Lk)("textarea",{id:"reason",name:"reason","onUpdate:modelValue":t[4]||(t[4]=e=>l.reason=e),placeholder:"Enter Reason",rows:"4",required:""},null,512),[[s.Jo,l.reason]])]),(0,o.Lk)("div",Hn,[Bn,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"quantity",name:"quantity","onUpdate:modelValue":t[5]||(t[5]=e=>l.quantity=e),placeholder:"Enter Quantity",required:""},null,512),[[s.Jo,l.quantity,void 0,{number:!0}]])]),(0,o.Lk)("div",Vn,[$n,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"budget",name:"budget","onUpdate:modelValue":t[6]||(t[6]=e=>l.budget=e),placeholder:"Enter Budget",required:""},null,512),[[s.Jo,l.budget,void 0,{number:!0}]])]),zn],32)])),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Yn,[(0,o.Lk)("p",null,(0,n.v_)(l.successMessage),1),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.closePopup&&i.closePopup(...e))},"Close")])):(0,o.Q3)("",!0)],64)}var Zn={name:"ProductRequest",props:{isEditing:Boolean,editingProductId:String},data(){return{productName:"",suggestedProducts:[],showSuggestions:!1,selectedProducts:[],successMessage:"",showPopup:!1,imageUrl:"",showMore:{},reason:"",quantity:0,budget:0,email:"",department:"",userOrganization:""}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r,organization:o,departmentName:n}=a;this.email=e.email,this.userName=s,this.userRole=r,this.userOrganization=o,this.department=n,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}},methods:{async getProductSuggestions(){if(""!==this.productName.trim())try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)throw new Error("User data or email not found in sessionStorage");{const t=await fetch(`http://localhost:3000/fetchProducts?email=${e.email}&productName=${this.productName}`),a=await t.json();this.suggestedProducts=a,this.showSuggestions=!0}}catch(e){console.error("Error fetching product suggestions:",e)}else this.showSuggestions=!1},addProduct(e){this.selectedProducts.push(e),this.productName="",this.showSuggestions=!1},addManualProduct(){if(""===this.productName.trim())return void alert("Please enter a valid product name.");const e={_id:Math.random().toString(36).substr(2,9),productName:this.productName.trim()};this.selectedProducts.push(e),this.productName="",this.showSuggestions=!1},async handleSubmit(){try{const e={productName:this.selectedProducts.map((e=>e.productName)).join(", "),reason:this.reason,quantity:this.quantity,budget:this.budget,status:0,email:this.email,department:this.department,organization:this.userOrganization},t=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit request");this.showSuccessPopup("Request submitted successfully!"),this.productName="",this.reason="",this.quantity=0,this.budget=0,this.selectedProducts=[]}catch(e){console.error("Error submitting request:",e),alert("Error submitting request. Please try again.")}},removeProduct(e){this.selectedProducts.splice(e,1)},showSuccessPopup(e){this.successMessage=e,this.showPopup=!0},closePopup(){this.showPopup=!1,window.location.reload()}}};const el=(0,P.A)(Zn,[["render",Gn],["__scopeId","data-v-0c2b048c"]]);var tl=el,al={name:"Product_Public",components:{SidebarMain:gt,HeaderMain:It,ProductRequest:tl},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",userCategory:"",products:[],searchKeyword:"",showPopup:!1}},async mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){this.email=e.email;try{const t=await fetch("http://localhost:3000/getUserInfoos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})});if(!t.ok)throw new Error("Failed to fetch user info");const a=await t.json(),{username:s,role:r,departmentName:o,specialLabName:n}=a;this.userName=s,this.userRole=r,this.userCategory=o||n}catch(t){console.error("Error fetching user info:",t)}}else console.error("User data not found in sessionStorage");e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchProducts()},computed:{filteredProducts(){return this.products.filter((e=>e.productId.toString().toLowerCase().includes(this.searchKeyword.toLowerCase())||e.productName.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.company.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.description.toLowerCase().includes(this.searchKeyword.toLowerCase())))}},methods:{async fetchProducts(){try{let e="http://localhost:3000/products";"Manager"!==this.userRole&&(e="http://localhost:3000/getProductsByCategory");const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})}),a=await t.json();this.products=a}catch(e){console.error("Error fetching products:",e)}},getProductImageUrl(e){return`http://localhost:3000/products/images/${e}`},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1}}};const sl=(0,P.A)(al,[["render",Sn],["__scopeId","data-v-3c9bd35c"]]);var rl=sl;const ol=e=>((0,o.Qi)("data-v-9901bf10"),e=e(),(0,o.jt)(),e),nl={lang:"en"},ll=ol((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),il=ol((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),dl={class:"main-content"},cl={class:"table-responsive"},ul={class:"container"},pl={class:"request-container"},hl=ol((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),ml={class:"table-container"},kl={class:"table"},fl=ol((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Reason")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-money-bill-alt mr-1"}),(0,o.eW)(" Budget")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),bl={key:0},vl={style:{color:"rgb(61, 61, 190)"}},Ll=ol((()=>(0,o.Lk)("span",{class:"rupee-icon"},"â‚¹",-1))),gl={key:0},yl=ol((()=>(0,o.Lk)("span",{class:"status yellow"},null,-1))),Pl=ol((()=>(0,o.Lk)("br",null,null,-1))),wl=["onClick"],Nl={key:1,class:"cancelled-by-you"},Cl=ol((()=>(0,o.Lk)("span",{class:"status red"},null,-1))),Sl=ol((()=>(0,o.Lk)("br",null,null,-1))),El={key:2,class:"cancelled-by-head"},_l={key:3,class:"approved"},ql={key:4,class:"transferred"},Il={key:1},Tl=ol((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"6",style:{"text-align":"center"}},"No data available")],-1))),Ul=[Tl],Xl={key:0,class:"popup-overlay"};function jl(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("ProductRequest");return(0,o.uX)(),(0,o.CE)("html",nl,[ll,(0,o.Lk)("body",null,[il,(0,o.bF)(d),(0,o.Lk)("div",dl,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Member Requests"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",cl,[(0,o.Lk)("div",ul,[(0,o.Lk)("div",pl,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),hl]),(0,o.Lk)("div",ml,[(0,o.Lk)("table",kl,[fl,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",bl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",vl,(0,n.v_)(e.reqno),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,(0,n.v_)(e.reason),1),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1),(0,o.Lk)("td",null,[Ll,(0,o.eW)((0,n.v_)(e.budget),1)]),(0,o.Lk)("td",null,[0===e.status?((0,o.uX)(),(0,o.CE)("div",gl,[yl,(0,o.eW)("inprogress"),Pl,(0,o.Lk)("button",{onClick:t=>i.cancelRequest(e.reqno),class:"cancel-btn"}," Cancel ",8,wl)])):-1===e.status?((0,o.uX)(),(0,o.CE)("div",Nl,[Cl,(0,o.eW)("Cancelled"),Sl])):-2===e.status?((0,o.uX)(),(0,o.CE)("div",El," Request canceled by head ")):1===e.status?((0,o.uX)(),(0,o.CE)("div",_l," Request approved ")):2===e.status?((0,o.uX)(),(0,o.CE)("div",ql," Product transferred ")):(0,o.Q3)("",!0)])])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Il,Ul))])])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Xl,[(0,o.bF)(u,{onClose:i.closePopup},null,8,["onClose"])])):(0,o.Q3)("",!0)])}var Rl={name:"Request_Member",components:{SidebarMain:gt,HeaderMain:It,ProductRequest:tl},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:"",showPopup:!1}},async mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchProducts()},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.reason?t.reason.toLowerCase():"",o=t.quantity?t.quantity.toString():"",n=t.budget?t.budget.toString():"",l=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)||n.includes(e)||l.includes(e)}))}},methods:{async fetchProducts(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch(`http://localhost:3000/requests?email=${e.email}`),a=await t.json();this.requests=a.map((e=>e))}}catch(e){console.error("Error fetching requests:",e)}},getProductImageUrl(e){return`http://localhost:3000/requests/images/${e}`},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1},async cancelRequest(e){try{const t=await fetch("http://localhost:3000/updateRequestStatus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e,status:-1})}),a=await t.json();console.log(a),t.ok?this.fetchProducts():console.error("Failed to update request status")}catch(t){console.error("Error updating request status:",t)}}}};const Fl=(0,P.A)(Rl,[["render",jl],["__scopeId","data-v-9901bf10"]]);var xl=Fl;const Ol=e=>((0,o.Qi)("data-v-7c0ab80c"),e=e(),(0,o.jt)(),e),Dl={lang:"en"},Al=Ol((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),Wl=Ol((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),Ml={class:"main-content"},Kl={class:"table-responsive"},Jl={class:"container"},Ql={class:"search-bar-product"},Hl={class:"product-container"},Bl=Ol((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),Vl={class:"button-container"},$l=Ol((()=>(0,o.Lk)("i",{class:"las la-paper-plane mr-2"},null,-1))),zl={class:"table-container"},Yl={class:"table"},Gl=Ol((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-id-badge mr-1"}),(0,o.eW)(" Product ID")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-image mr-1"}),(0,o.eW)(" Product Image")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-building mr-1"}),(0,o.eW)(" Company")]),(0,o.Lk)("th",{class:"description-column"},[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Description ")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")])])],-1))),Zl={key:0},ei={style:{color:"rgb(61, 61, 190)"}},ti=["src","alt"],ai={class:"description-column"},si={key:0},ri={key:0},oi=["onClick"],ni=Ol((()=>(0,o.Lk)("div",{style:{color:"blueviolet"}},"Read more",-1))),li=[ni],ii={key:1},di=["onClick"],ci=Ol((()=>(0,o.Lk)("div",{style:{color:"blueviolet"}},"Show less",-1))),ui=[ci],pi={key:1},hi={key:1},mi=Ol((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"7",style:{"text-align":"center"}},"No data available")],-1))),ki=[mi],fi={key:0,class:"popup-overlay"};function bi(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("ProductRequest");return(0,o.uX)(),(0,o.CE)("html",Dl,[Al,(0,o.Lk)("body",null,[Wl,(0,o.bF)(d),(0,o.Lk)("div",Ml,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Product Lists"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",Kl,[(0,o.Lk)("div",Jl,[(0,o.Lk)("div",Ql,[(0,o.Lk)("div",Hl,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Bl]),(0,o.Lk)("div",Vl,[(0,o.Lk)("button",{class:"btn",onClick:t[1]||(t[1]=(...e)=>i.openPopup&&i.openPopup(...e))},[$l,(0,o.eW)(" Request Product ")])])]),(0,o.Lk)("div",zl,[(0,o.Lk)("table",Yl,[Gl,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",Zl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",ei,(0,n.v_)(e.productId),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.getProductImageUrl(e.productId),alt:e.productName,style:{"max-width":"100px"}},null,8,ti)]),(0,o.Lk)("td",null,(0,n.v_)(e.company),1),(0,o.Lk)("td",ai,[e.description.length>70?((0,o.uX)(),(0,o.CE)("div",si,[e.showFullDescription?((0,o.uX)(),(0,o.CE)("div",ii,[(0,o.eW)((0,n.v_)(e.description)+" ",1),(0,o.Lk)("span",{onClick:e=>i.toggleDescription(t)},ui,8,di)])):((0,o.uX)(),(0,o.CE)("div",ri,[(0,o.eW)((0,n.v_)(e.description.slice(0,70))+"... ",1),(0,o.Lk)("span",{onClick:e=>i.toggleDescription(t)},li,8,oi)]))])):((0,o.uX)(),(0,o.CE)("div",pi,(0,n.v_)(e.description),1))]),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1)])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",hi,ki))])])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",fi,[(0,o.bF)(u,{onClose:i.closePopup},null,8,["onClose"])])):(0,o.Q3)("",!0)])}const vi=e=>((0,o.Qi)("data-v-2c2f1ba8"),e=e(),(0,o.jt)(),e),Li={key:0,class:"popup"},gi={class:"header-container"},yi=vi((()=>(0,o.Lk)("h2",null,"Request Product",-1))),Pi=vi((()=>(0,o.Lk)("i",{class:"fas fa-times"},null,-1))),wi=[Pi],Ni={class:"product-input-box"},Ci=vi((()=>(0,o.Lk)("label",{for:"productName",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-tag icon mr-1"}),(0,o.Lk)("span",null,"Product Name")],-1))),Si=vi((()=>(0,o.Lk)("i",{class:"fas fa-tools"},null,-1))),Ei={key:0,class:"suggestions-list"},_i=["onClick"],qi=vi((()=>(0,o.Lk)("strong",null,[(0,o.Lk)("i",{class:"fas fa-bookmark icon mr-1"}),(0,o.eW)("Name:")],-1))),Ii=vi((()=>(0,o.Lk)("strong",null,[(0,o.Lk)("i",{class:"fas fa-key icon mr-1"}),(0,o.eW)("ID:")],-1))),Ti={class:"selected-products-box"},Ui=["onClick"],Xi=vi((()=>(0,o.Lk)("i",{class:"fas fa-times cross-icon"},null,-1))),ji=[Xi],Ri={class:"product-input-box"},Fi=vi((()=>(0,o.Lk)("label",{for:"reason",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-comment mr-1"}),(0,o.Lk)("span",null,"Reason")],-1))),xi={class:"product-input-box"},Oi=vi((()=>(0,o.Lk)("label",{for:"quantity",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-sort-numeric-up mr-1"}),(0,o.Lk)("span",null,"Quantity")],-1))),Di={class:"product-input-box"},Ai=vi((()=>(0,o.Lk)("label",{for:"budget",class:"label-wrapper"},[(0,o.Lk)("i",{class:"fas fa-money-bill-alt mr-1"}),(0,o.Lk)("span",null,"Budget")],-1))),Wi=vi((()=>(0,o.Lk)("div",{class:"form-submit-btn"},[(0,o.Lk)("button",{type:"submit"},[(0,o.Lk)("i",{class:"fas fa-plus-circle"}),(0,o.eW)(" Add Request")])],-1))),Mi={key:1,class:"custom-popup"};function Ki(e,t,a,r,l,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[l.showPopup?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Li,[(0,o.Lk)("div",gi,[yi,(0,o.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=(...e)=>i.closePopup&&i.closePopup(...e))},wi)]),(0,o.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,o.Lk)("div",Ni,[Ci,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"productName",name:"productName",placeholder:"Enter Product Name","onUpdate:modelValue":t[1]||(t[1]=e=>l.productName=e),onInput:t[2]||(t[2]=(...e)=>i.getProductSuggestions&&i.getProductSuggestions(...e))},null,544),[[s.Jo,l.productName]]),(0,o.Lk)("button",{type:"button",class:"manual-btn",onClick:t[3]||(t[3]=(...e)=>i.addManualProduct&&i.addManualProduct(...e))},[Si,(0,o.eW)(" Manual ")]),l.showSuggestions?((0,o.uX)(),(0,o.CE)("ul",Ei,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.suggestedProducts,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e._id,onClick:t=>i.addProduct(e)},[(0,o.Lk)("div",null,[(0,o.Lk)("span",null,[qi,(0,o.eW)(" "+(0,n.v_)(e.productName),1)]),(0,o.Lk)("span",null,[Ii,(0,o.eW)(" "+(0,n.v_)(e.productId),1)])])],8,_i)))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ti,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.selectedProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"selected-product-item"},[(0,o.eW)((0,n.v_)(e.productName)+" ",1),(0,o.Lk)("button",{type:"button",onClick:e=>i.removeProduct(t)},ji,8,Ui)])))),128))]),(0,o.Lk)("div",Ri,[Fi,(0,o.bo)((0,o.Lk)("textarea",{id:"reason",name:"reason","onUpdate:modelValue":t[4]||(t[4]=e=>l.reason=e),placeholder:"Enter Reason",rows:"4",required:""},null,512),[[s.Jo,l.reason]])]),(0,o.Lk)("div",xi,[Oi,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"quantity",name:"quantity","onUpdate:modelValue":t[5]||(t[5]=e=>l.quantity=e),placeholder:"Enter Quantity",required:""},null,512),[[s.Jo,l.quantity,void 0,{number:!0}]])]),(0,o.Lk)("div",Di,[Ai,(0,o.bo)((0,o.Lk)("input",{type:"number",id:"budget",name:"budget","onUpdate:modelValue":t[6]||(t[6]=e=>l.budget=e),placeholder:"Enter Budget",required:""},null,512),[[s.Jo,l.budget,void 0,{number:!0}]])]),Wi],32)])),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Mi,[(0,o.Lk)("p",null,(0,n.v_)(l.successMessage),1),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.closePopup&&i.closePopup(...e))},"Close")])):(0,o.Q3)("",!0)],64)}var Ji={name:"ProductRequest",props:{isEditing:Boolean,editingProductId:String},data(){return{productName:"",suggestedProducts:[],showSuggestions:!1,selectedProducts:[],successMessage:"",showPopup:!1,imageUrl:"",showMore:{},reason:"",quantity:0,budget:0,email:"",department:""}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)throw new Error("User data or email not found in sessionStorage");{const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})});if(!t.ok)throw new Error("Network response was not ok");const a=await t.json(),{department:s}=a;this.email=e.email,this.department=s}}catch(e){console.error("Error fetching user info:",e)}},methods:{async getProductSuggestions(){if(""!==this.productName.trim())try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)throw new Error("User data or email not found in sessionStorage");{const t=await fetch(`http://localhost:3000/fetchProducts?email=${e.email}&productName=${this.productName}`),a=await t.json();this.suggestedProducts=a,this.showSuggestions=!0}}catch(e){console.error("Error fetching product suggestions:",e)}else this.showSuggestions=!1},addProduct(e){this.selectedProducts.push(e),this.productName="",this.showSuggestions=!1},addManualProduct(){if(""===this.productName.trim())return void alert("Please enter a valid product name.");const e={_id:Math.random().toString(36).substr(2,9),productName:this.productName.trim()};this.selectedProducts.push(e),this.productName="",this.showSuggestions=!1},async handleSubmit(){try{const e={productName:this.selectedProducts.map((e=>e.productName)).join(", "),reason:this.reason,quantity:this.quantity,budget:this.budget,status:1,email:this.email,department:this.department},t=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to submit request");this.showSuccessPopup("Request submitted successfully!"),this.productName="",this.reason="",this.quantity=0,this.budget=0,this.selectedProducts=[]}catch(e){console.error("Error submitting request:",e),alert("Error submitting request. Please try again.")}},removeProduct(e){this.selectedProducts.splice(e,1)},showSuccessPopup(e){this.successMessage=e,this.showPopup=!0},closePopup(){this.showPopup=!1,window.location.reload()}}};const Qi=(0,P.A)(Ji,[["render",Ki],["__scopeId","data-v-2c2f1ba8"]]);var Hi=Qi,Bi={name:"Product_Head",components:{SidebarMain:ye,HeaderMain:Te,ProductRequest:Hi},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",products:[],searchKeyword:"",showPopup:!1,category:""}},async mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfoos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a,department:s,specialLab:r}=e;this.userName=t,this.userRole=a,this.category=s||r,this.fetchProductsByCategory()})).catch((e=>{console.error("Error fetching user info:",e)})),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto)):console.error("User data not found in sessionStorage")},computed:{filteredProducts(){return this.products.filter((e=>e.productId.toString().toLowerCase().includes(this.searchKeyword.toLowerCase())||e.productName.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.company.toLowerCase().includes(this.searchKeyword.toLowerCase())||e.description.toLowerCase().includes(this.searchKeyword.toLowerCase())))}},methods:{async fetchProductsByCategory(){try{const e=await fetch("http://localhost:3000/getProductsByCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})}),t=await e.json();this.products=t}catch(e){console.error("Error fetching products:",e)}},getProductImageUrl(e){return`http://localhost:3000/products/images/${e}`},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1}}};const Vi=(0,P.A)(Bi,[["render",bi],["__scopeId","data-v-7c0ab80c"]]);var $i=Vi;const zi=e=>((0,o.Qi)("data-v-97054b7c"),e=e(),(0,o.jt)(),e),Yi={lang:"en"},Gi=zi((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),Zi=zi((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),ed={class:"main-content"},td={class:"table-responsive"},ad={class:"container"},sd={class:"request-container"},rd=zi((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),od={class:"table-container"},nd={class:"table"},ld=zi((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Reason")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-money-bill-alt mr-1"}),(0,o.eW)(" Budget")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),id={key:0},dd={style:{color:"rgb(61, 61, 190)"}},cd=zi((()=>(0,o.Lk)("span",{class:"rupee-icon"},"â‚¹",-1))),ud={key:0},pd=zi((()=>(0,o.Lk)("span",{class:"status yellow"},null,-1))),hd=zi((()=>(0,o.Lk)("br",null,null,-1))),md=["onClick"],kd={key:1,class:"cancelled-by-you"},fd=zi((()=>(0,o.Lk)("span",{class:"status red"},null,-1))),bd={key:2,class:"cancelled-by-head"},vd={key:3,class:"approved"},Ld=zi((()=>(0,o.Lk)("span",{class:"status green"},null,-1))),gd={key:4,class:"transferred"},yd={key:1},Pd=zi((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"6",style:{"text-align":"center"}},"No data available")],-1))),wd=[Pd],Nd={key:0,class:"popup-overlay"};function Cd(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("ProductRequest");return(0,o.uX)(),(0,o.CE)("html",Yi,[Gi,(0,o.Lk)("body",null,[Zi,(0,o.bF)(d),(0,o.Lk)("div",ed,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Head Requests"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",td,[(0,o.Lk)("div",ad,[(0,o.Lk)("div",sd,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),rd]),(0,o.Lk)("div",od,[(0,o.Lk)("table",nd,[ld,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",id,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",dd,(0,n.v_)(e.reqno),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,(0,n.v_)(e.reason),1),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1),(0,o.Lk)("td",null,[cd,(0,o.eW)((0,n.v_)(e.budget),1)]),(0,o.Lk)("td",null,[0===e.status?((0,o.uX)(),(0,o.CE)("div",ud,[pd,(0,o.eW)("inprogress"),hd,(0,o.Lk)("button",{onClick:t=>i.cancelRequest(e.reqno),class:"cancel-btn"}," Cancel ",8,md)])):-1===e.status?((0,o.uX)(),(0,o.CE)("div",kd,[fd,(0,o.eW)("Cancelled ")])):-2===e.status?((0,o.uX)(),(0,o.CE)("div",bd," Request canceled by head ")):1===e.status?((0,o.uX)(),(0,o.CE)("div",vd,[Ld,(0,o.eW)("Request approved ")])):2===e.status?((0,o.uX)(),(0,o.CE)("div",gd," Product transferred ")):(0,o.Q3)("",!0)])])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",yd,wd))])])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Nd,[(0,o.bF)(u,{onClose:i.closePopup},null,8,["onClose"])])):(0,o.Q3)("",!0)])}var Sd={name:"Request_Head",components:{SidebarMain:ye,HeaderMain:Te,ProductRequest:Hi},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:"",showPopup:!1}},async mounted(){const e=JSON.parse(sessionStorage.getItem("userData"));e&&e.email?(this.email=e.email,fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{const{username:t,role:a}=e;this.userName=t,this.userRole=a})).catch((e=>{console.error("Error fetching user info:",e)}))):console.error("User data not found in sessionStorage"),e&&e.profilePhoto&&(this.userProfile.profilePhoto=e.profilePhoto),this.fetchProducts()},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.reason?t.reason.toLowerCase():"",o=t.quantity?t.quantity.toString():"",n=t.budget?t.budget.toString():"",l=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)||n.includes(e)||l.includes(e)}))}},methods:{async fetchProducts(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch(`http://localhost:3000/requests?email=${e.email}`),a=await t.json();this.requests=a.map((e=>e))}}catch(e){console.error("Error fetching requests:",e)}},getProductImageUrl(e){return`http://localhost:3000/requests/images/${e}`},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1},async cancelRequest(e){try{const t=await fetch("http://localhost:3000/updateRequestStatus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e,status:-1})}),a=await t.json();console.log(a),t.ok?this.fetchProducts():console.error("Failed to update request status")}catch(t){console.error("Error updating request status:",t)}}}};const Ed=(0,P.A)(Sd,[["render",Cd],["__scopeId","data-v-97054b7c"]]);var _d=Ed;const qd=e=>((0,o.Qi)("data-v-945a0806"),e=e(),(0,o.jt)(),e),Id={lang:"en"},Td=qd((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),Ud=qd((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),Xd={class:"main-content"},jd={class:"table-responsive"},Rd={class:"container"},Fd={class:"request-container"},xd=qd((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),Od={class:"table-container"},Dd={class:"table"},Ad=qd((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Reason")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-money-bill-alt mr-1"}),(0,o.eW)(" Budget")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-comment mr-1"}),(0,o.eW)(" Feedback")])])],-1))),Wd={key:0},Md={style:{color:"rgb(61, 61, 190)"}},Kd=qd((()=>(0,o.Lk)("span",{class:"rupee-icon"},"â‚¹",-1))),Jd={key:0,class:"req-class"},Qd=["onClick"],Hd=["onClick"],Bd={key:1,class:"cancelled-by-head"},Vd=qd((()=>(0,o.Lk)("span",{class:"status red"},null,-1))),$d={key:2,class:"approved"},zd=qd((()=>(0,o.Lk)("span",{class:"status green"},null,-1))),Yd={key:3,class:"transferred"},Gd={key:1},Zd=qd((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"6",style:{"text-align":"center"}},"No data available")],-1))),ec=[Zd],tc={key:0,class:"popup"},ac={class:"feedback-modal"},sc={class:"header-container"},rc=qd((()=>(0,o.Lk)("h2",null,"Feedback",-1))),oc=qd((()=>(0,o.Lk)("i",{class:"fas fa-times"},null,-1))),nc=[oc];function lc(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("html",Id,[Td,(0,o.Lk)("body",null,[Ud,(0,o.bF)(d),(0,o.Lk)("div",Xd,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:" Request Approval"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",jd,[(0,o.Lk)("div",Rd,[(0,o.Lk)("div",Fd,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),xd]),(0,o.Lk)("div",Od,[(0,o.Lk)("table",Dd,[Ad,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",Wd,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",Md,(0,n.v_)(e.reqno),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,(0,n.v_)(e.reason),1),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1),(0,o.Lk)("td",null,[Kd,(0,o.eW)((0,n.v_)(e.budget),1)]),(0,o.Lk)("td",null,[0===e.status?((0,o.uX)(),(0,o.CE)("div",Jd,[(0,o.Lk)("button",{onClick:t=>i.openPopup(e.reqno,"reject",e.email),class:"reject-btn"}," Reject ",8,Qd),(0,o.Lk)("button",{onClick:t=>i.openPopup(e.reqno,"approve",e.email),class:"approve-btn"}," Approve ",8,Hd)])):-2===e.status?((0,o.uX)(),(0,o.CE)("div",Bd,[Vd,(0,o.eW)("Rejected ")])):1===e.status?((0,o.uX)(),(0,o.CE)("div",$d,[zd,(0,o.eW)("Approved ")])):2===e.status?((0,o.uX)(),(0,o.CE)("div",Yd," Product transferred ")):(0,o.Q3)("",!0)]),(0,o.Lk)("td",null,[(0,o.Lk)("span",null,(0,n.v_)(l.requestFeedbacks[e.reqno]),1)])])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Gd,ec))])])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",tc,[(0,o.Lk)("div",ac,[(0,o.Lk)("div",sc,[rc,(0,o.Lk)("button",{class:"close-button",onClick:t[1]||(t[1]=(...e)=>i.closeModal&&i.closeModal(...e))},nc)]),(0,o.bo)((0,o.Lk)("textarea",{class:"feed-back",id:"feedback","onUpdate:modelValue":t[2]||(t[2]=e=>l.feedbackMessage=e),maxlength:"500"},null,512),[[s.Jo,l.feedbackMessage]]),(0,o.Lk)("button",{class:"send-msg",onClick:t[3]||(t[3]=(...e)=>i.sendFeedback&&i.sendFeedback(...e))},"Send")])])):(0,o.Q3)("",!0)])}var ic={name:"Approval_Head",components:{SidebarMain:ye,HeaderMain:Te},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],feedbacks:[],searchKeyword:"",showModal:!1,feedbackMessage:"",currentReqNo:null,actionType:"",showPopup:!1,sendingFeedback:!1,requestEmail:"",requestFeedbacks:{}}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r,organization:o,departmentName:n}=a;this.userName=s,this.userRole=r,this.userOrganization=o,this.userDepartment=n,console.log(this.departmentName),await this.fetchProducts(),await this.fetchFeedbackForRequests()}}catch(e){console.error("Error fetching user info:",e)}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.reason?t.reason.toLowerCase():"",o=t.quantity?t.quantity.toString():"",n=t.budget?t.budget.toString():"",l=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)||n.includes(e)||l.includes(e)}))}},methods:{async fetchProducts(){try{const e=await fetch(`http://localhost:3000/approval?department=${this.userDepartment}&organization=${this.userOrganization}`),t=await e.json();this.requests=t}catch(e){console.error("Error fetching requests:",e)}},getProductImageUrl(e){return`http://localhost:3000/requests/images/${e}`},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription},openPopup(e,t,a){this.currentReqNo=e,this.actionType=t,this.requestEmail=a,this.showPopup=!0},closePopup(){this.showPopup=!1},async rejectRequest(e){try{const t=await fetch("http://localhost:3000/updateRequestStatus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e,status:-2})}),a=await t.json();console.log(a),t.ok?this.fetchProducts():console.error("Failed to update request status")}catch(t){console.error("Error updating request status:",t)}},async approveRequest(e){try{const t=await fetch("http://localhost:3000/updateRequestStatus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e,status:1})}),a=await t.json();console.log(a),t.ok?this.fetchProducts():console.error("Failed to update request status")}catch(t){console.error("Error updating request status:",t)}},closeModal(){this.showModal=!1,window.location.reload()},async sendFeedback(){this.sendingFeedback=!0;try{const e=await fetch("http://localhost:3000/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:this.currentReqNo,feedback:this.feedbackMessage,email:this.requestEmail})});e.ok?("approve"===this.actionType?await this.approveRequest(this.currentReqNo):"reject"===this.actionType&&await this.rejectRequest(this.currentReqNo),this.fetchProducts(),window.location.reload()):console.error("Failed to submit feedback")}catch(e){console.error("Error submitting feedback:",e)}this.sendingFeedback=!1,this.closeModal()},async fetchFeedbackForRequests(){try{for(const e of this.requests){const t=await this.getRequestFeedback(e.reqno);this.requestFeedbacks?this.requestFeedbacks[e.reqno]=t.feedback:console.error("this.requestFeedbacks is undefined")}}catch(e){console.error("Error fetching feedback:",e)}},async getRequestFeedback(e){try{const t=await fetch(`http://localhost:3000/feedback/${e}`);if(t.ok){const e=await t.json();return e}return console.error("Failed to fetch feedback data"),{feedback:"Not Yet"}}catch(t){return console.error("Error fetching feedback data:",t),{feedback:"Not Yet"}}}}};const dc=(0,P.A)(ic,[["render",lc],["__scopeId","data-v-945a0806"]]);var cc=dc;const uc=e=>((0,o.Qi)("data-v-1ced0e99"),e=e(),(0,o.jt)(),e),pc={lang:"en"},hc=uc((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),mc=uc((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),kc={class:"main-content"},fc={class:"table-responsive"},bc={class:"container"},vc={class:"request-container"},Lc=uc((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),gc={class:"table-container"},yc={class:"table"},Pc=uc((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-file-alt mr-1"}),(0,o.eW)(" Reason")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-money-bill-alt mr-1"}),(0,o.eW)(" Budget")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-comment mr-1"}),(0,o.eW)(" Feedback")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-file-invoice mr-1"}),(0,o.eW)(" Bill")])])],-1))),wc={key:0},Nc={key:0},Cc=["onClick"],Sc={key:1,class:"transferred"},Ec=uc((()=>(0,o.Lk)("span",{class:"status green"},null,-1))),_c=["onClick"],qc={key:1},Ic=uc((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"8"},"No data available")],-1))),Tc=[Ic],Uc={key:0,class:"custom-popup"},Xc={class:"custom-feedback-modal"},jc={class:"custom-header-container"},Rc=uc((()=>(0,o.Lk)("h2",{class:"custom-header-title"},"Feedback",-1))),Fc=uc((()=>(0,o.Lk)("i",{class:"custom-close-icon fas fa-times"},null,-1))),xc=[Fc],Oc={key:1,class:"custom-popup"},Dc={class:"custom-feedback-modal"},Ac={class:"custom-header-container"},Wc=uc((()=>(0,o.Lk)("h2",{class:"custom-header-title"},"Bit Inventory Bill",-1))),Mc=uc((()=>(0,o.Lk)("i",{class:"custom-close-icon fas fa-times"},null,-1))),Kc=[Mc],Jc={class:"bill-details"},Qc=uc((()=>(0,o.Lk)("strong",null,"Request No:",-1))),Hc=uc((()=>(0,o.Lk)("strong",null,"Email:",-1))),Bc={class:"bill-table"},Vc=uc((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Product Name"),(0,o.Lk)("th",null,"Company"),(0,o.Lk)("th",null,"Quantity"),(0,o.Lk)("th",null,"Status")])],-1)));function $c(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("html",pc,[hc,(0,o.Lk)("body",null,[mc,(0,o.bF)(d),(0,o.Lk)("div",kc,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:" Request Approval"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",fc,[(0,o.Lk)("div",bc,[(0,o.Lk)("div",vc,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Lc]),(0,o.Lk)("div",gc,[(0,o.Lk)("table",yc,[Pc,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",wc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,n.v_)(e.reqno),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,(0,n.v_)(e.reason),1),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1),(0,o.Lk)("td",null,"â‚¹"+(0,n.v_)(e.budget),1),(0,o.Lk)("td",null,[1===e.status?((0,o.uX)(),(0,o.CE)("div",Nc,[(0,o.Lk)("button",{onClick:t=>i.openPopup(e.reqno),class:"approve-btn"}," Approve ",8,Cc)])):2===e.status?((0,o.uX)(),(0,o.CE)("div",Sc,[Ec,(0,o.eW)("Request Approved ")])):(0,o.Q3)("",!0)]),(0,o.Lk)("td",null,(0,n.v_)(e.feedback?e.feedback:"Not Approved yet"),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{onClick:t=>i.generateBill(e.reqno),class:"bill-btn"}," Generate Bill ",8,_c)])])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",qc,Tc))])])])])])]),l.showPopup?((0,o.uX)(),(0,o.CE)("div",Uc,[(0,o.Lk)("div",Xc,[(0,o.Lk)("div",jc,[Rc,(0,o.Lk)("button",{class:"custom-close-button",onClick:t[1]||(t[1]=(...e)=>i.closePopup&&i.closePopup(...e))},xc)]),(0,o.bo)((0,o.Lk)("textarea",{class:"custom-feedback-textarea","onUpdate:modelValue":t[2]||(t[2]=e=>l.feedbackMessage=e),maxlength:"500",placeholder:"Enter your feedback"},null,512),[[s.Jo,l.feedbackMessage]]),(0,o.Lk)("button",{class:"custom-send-button",onClick:t[3]||(t[3]=(...e)=>i.sendFeedback&&i.sendFeedback(...e))},"Send")])])):(0,o.Q3)("",!0),l.showBillPopup?((0,o.uX)(),(0,o.CE)("div",Oc,[(0,o.Lk)("div",Dc,[(0,o.Lk)("div",Ac,[Wc,(0,o.Lk)("button",{class:"custom-close-button",onClick:t[4]||(t[4]=(...e)=>i.closeBillPopup&&i.closeBillPopup(...e))},Kc)]),(0,o.Lk)("div",Jc,[(0,o.Lk)("p",null,[Qc,(0,o.eW)(" "+(0,n.v_)(l.billDetails.reqNo),1)]),(0,o.Lk)("p",null,[Hc,(0,o.eW)(" "+(0,n.v_)(l.billDetails.email),1)]),(0,o.Lk)("table",Bc,[Vc,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.billDetails.products,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,(0,n.v_)(e.company),1),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1),(0,o.Lk)("td",null,(0,n.v_)(e.status),1)])))),128))])]),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.generatePDF&&i.generatePDF(...e)),class:"pdf-button"},"Print as PDF")])])])):(0,o.Q3)("",!0)])])}var zc=a(4323),Yc=a(3246),Gc=a.n(Yc),Zc={name:"Approval_Inventory",components:{SidebarMain:wa,HeaderMain:Xa},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:"",showPopup:!1,feedbackMessage:"",currentReqNo:null,showBillPopup:!1,billDetails:{reqNo:"",email:"",products:[],budget:0}}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r}=a;this.userName=s,this.userRole=r,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.reason?t.reason.toLowerCase():"",o=t.quantity?t.quantity.toString():"",n=t.budget?t.budget.toString():"",l=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)||n.includes(e)||l.includes(e)}))}},methods:{async fetchProducts(){try{const e=await fetch("http://localhost:3000/inventory/requests"),t=await e.json();this.requests=t}catch(e){console.error("Error fetching requests:",e)}},openPopup(e){this.currentReqNo=e,this.showPopup=!0},closePopup(){this.showPopup=!1},async sendFeedback(){try{const e=await fetch("http://localhost:3000/updateRequestStatusInv",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:this.currentReqNo,status:2,feedback:this.feedbackMessage})});e.ok?(this.fetchProducts(),this.showPopup=!1,this.feedbackMessage=""):console.error("Failed to update request status")}catch(e){console.error("Error updating request status:",e)}},async generatePDF(){const e=new zc.jsPDF;e.setFontSize(18),e.text("Bit Inventory Bill",10,10),e.setFontSize(12),e.text(`Request No: ${this.billDetails.reqNo}`,10,20),e.text(`Email: ${this.billDetails.email}`,10,30),e.text(`Budget: â‚¹${this.billDetails.budget}`,10,40);const t=["Product Name","Company","Quantity","Status"],a=this.billDetails.products.map((e=>[e.productName,e.company,e.quantity,e.status]));Gc()(e,{startY:50,head:[t],body:a}),e.save(`Bill_${this.billDetails.reqNo}.pdf`)},async generateBill(e){try{const t=await fetch("http://localhost:3000/getBillDetails",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e})}),a=await t.json();this.billDetails=a,this.showBillPopup=!0}catch(t){console.error("Error generating bill:",t)}},closeBillPopup(){this.showBillPopup=!1}}};const eu=(0,P.A)(Zc,[["render",$c],["__scopeId","data-v-1ced0e99"]]);var tu=eu;const au=e=>((0,o.Qi)("data-v-45ea5f38"),e=e(),(0,o.jt)(),e),su={lang:"en"},ru=au((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),ou=au((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),nu={class:"main-content"},lu={class:"table-responsive"},iu={class:"container"},du={class:"request-container"},cu=au((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),uu={class:"table-container"},pu={class:"table"},hu=au((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" Req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-envelope mr-1"}),(0,o.eW)(" Email")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),mu={key:0},ku=["rowspan"],fu=["rowspan"],bu={style:{width:"10%"}},vu={style:{width:"25%"}},Lu={key:0},gu=au((()=>(0,o.Lk)("i",{class:"fas fa-arrow-alt-circle-right mr-1"},null,-1))),yu=au((()=>(0,o.Lk)("div",{style:{color:"green"}},"Product Transfered",-1))),Pu=[gu,yu],wu={key:1,class:"transferred"},Nu=au((()=>(0,o.Lk)("i",{class:"fas fa-arrow-alt-circle-left mr-1"},null,-1))),Cu=au((()=>(0,o.Lk)("div",{style:{color:"rgb(255, 0, 0)"}},"Product Returned",-1))),Su=[Nu,Cu],Eu={key:2},_u={key:1},qu=au((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"5"},"No data available")],-1))),Iu=[qu];function Tu(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("html",su,[ru,(0,o.Lk)("body",null,[ou,(0,o.bF)(d),(0,o.Lk)("div",nu,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Transfered Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",lu,[(0,o.Lk)("div",iu,[(0,o.Lk)("div",du,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),cu]),(0,o.Lk)("div",uu,[(0,o.Lk)("table",pu,[hu,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",mu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.products,((t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:t.productName+a},[0===a?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:e.products.length,class:"req-email"},[(0,o.Lk)("div",null,(0,n.v_)(e.reqNo),1)],8,ku)):(0,o.Q3)("",!0),0===a?((0,o.uX)(),(0,o.CE)("td",{key:1,rowspan:e.products.length,class:"req-email",style:{width:"25%"}},[(0,o.Lk)("div",null,(0,n.v_)(e.email),1)],8,fu)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(t.productName),1),(0,o.Lk)("td",bu,(0,n.v_)(t.quantityTransferred),1),(0,o.Lk)("td",vu,[0===t.status?((0,o.uX)(),(0,o.CE)("div",Lu,Pu)):1===t.status?((0,o.uX)(),(0,o.CE)("div",wu,Su)):((0,o.uX)(),(0,o.CE)("div",Eu,"Other Status"))])])))),128))],64)))),256))])):((0,o.uX)(),(0,o.CE)("tbody",_u,Iu))])])])])])])])])}var Uu={name:"Transfered_Inventory",components:{SidebarMain:wa,HeaderMain:Xa},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:"",showPopup:!1,feedbackMessage:"",currentReqNo:null}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r}=a;this.userName=s,this.userRole=r,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.transferredQuantity?t.transferredQuantity.toString():"",o=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)}))}},methods:{async fetchProducts(){try{const e=await fetch("http://localhost:3000/gettransferedproduct"),t=await e.json();this.requests=t,this.filterData()}catch(e){console.error("Error fetching products:",e)}},filterData(){this.filteredProducts=this.requests.map((e=>({reqNo:e.reqNo,email:e.email,products:e.products})))}}};const Xu=(0,P.A)(Uu,[["render",Tu],["__scopeId","data-v-45ea5f38"]]);var ju=Xu;const Ru=e=>((0,o.Qi)("data-v-538d58cb"),e=e(),(0,o.jt)(),e),Fu=Ru((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),xu={class:"main-content"},Ou={class:"table-responsive"},Du={class:"container"},Au={class:"request-container"},Wu=Ru((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),Mu={class:"table-container"},Ku={class:"table"},Ju=Ru((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" Req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-envelope mr-1"}),(0,o.eW)(" Email")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-info-circle mr-1"}),(0,o.eW)(" Product Description")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-link mr-1"}),(0,o.eW)(" Link")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),Qu={key:0},Hu=["rowspan"],Bu=["rowspan"],Vu=["href"],$u=Ru((()=>(0,o.Lk)("i",{class:"fas fa-external-link-alt mr-1"},null,-1))),zu=[$u],Yu={key:1,class:"fas fa-external-link-alt mr-1 text-muted"},Gu=Ru((()=>(0,o.Lk)("span",{class:"status red"},null,-1))),Zu=Ru((()=>(0,o.Lk)("span",{class:"status green"},null,-1))),ep=["href"],tp=Ru((()=>(0,o.Lk)("i",{class:"fas fa-external-link-alt mr-1"},null,-1))),ap=[tp],sp={key:1},rp=Ru((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"7"},"No data available")],-1))),op=[rp];function np(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("body",null,[Fu,(0,o.bF)(d),(0,o.Lk)("div",xu,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Buy Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",Ou,[(0,o.Lk)("div",Du,[(0,o.Lk)("div",Au,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Wu]),(0,o.Lk)("div",Mu,[(0,o.Lk)("table",Ku,[Ju,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",Qu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.products,((t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:t._id},[0===a?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:e.products.length,class:"req-email"},[(0,o.Lk)("div",null,(0,n.v_)(e.reqNo),1)],8,Hu)):(0,o.Q3)("",!0),0===a?((0,o.uX)(),(0,o.CE)("td",{key:1,rowspan:e.products.length,class:"req-email"},[(0,o.Lk)("div",null,(0,n.v_)(e.email),1)],8,Bu)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(t.productName),1),(0,o.Lk)("td",null,(0,n.v_)(t.quantityNeeded),1),(0,o.Lk)("td",null,(0,n.v_)(t.description),1),(0,o.Lk)("td",null,[i.isLinkValid(t)?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.formatLink(t.link),target:"_blank",rel:"noopener noreferrer"},zu,8,Vu)):((0,o.uX)(),(0,o.CE)("i",Yu))]),(0,o.Lk)("td",null,[0===t.status?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[Gu,(0,o.eW)("Link not available ")],64)):1===t.status?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[Zu,(0,o.eW)("Link Updated ")],64)):((0,o.uX)(),(0,o.CE)("a",{key:2,href:t.link,target:"_blank",rel:"noopener noreferrer"},ap,8,ep))])])))),128))],64)))),128))])):((0,o.uX)(),(0,o.CE)("tbody",sp,op))])])])])])])])}var lp={name:"Buy_Product_Inventory",components:{SidebarMain:wa,HeaderMain:Xa},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:""}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r}=a;this.userName=s,this.userRole=r,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.transferredQuantity?t.transferredQuantity.toString():"",o=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)}))}},methods:{async fetchProducts(){try{const e=await fetch("http://localhost:3000/getbuyproduct"),t=await e.json();this.requests=t}catch(e){console.error("Error fetching products:",e)}},filterData(){this.filteredProducts=this.requests.map((e=>({reqNo:e.reqNo,email:e.email,products:e.products})))},formatLink(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e:"#"},isLinkValid(e){return e.link&&e.link.length>0}}};const ip=(0,P.A)(lp,[["render",np],["__scopeId","data-v-538d58cb"]]);var dp=ip;const cp=e=>((0,o.Qi)("data-v-0ffdf0ef"),e=e(),(0,o.jt)(),e),up=cp((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),pp={class:"main-content"},hp={key:1,class:"custom-alert"},mp={class:"alert-content"},kp=cp((()=>(0,o.Lk)("p",null,"Product Updated",-1))),fp={class:"table-responsive"},bp={class:"container"},vp={class:"request-container"},Lp=cp((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),gp={class:"table-container"},yp={class:"table"},Pp=cp((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" Req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-info-circle mr-1"}),(0,o.eW)(" Product Description")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-link mr-1"}),(0,o.eW)(" Link")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),wp={key:0},Np=["rowspan"],Cp=["href"],Sp=cp((()=>(0,o.Lk)("i",{class:"fas fa-external-link-alt mr-1"},null,-1))),Ep=[Sp],_p={key:1,class:"fas fa-external-link-alt mr-1 text-muted"},qp=["onClick"],Ip=cp((()=>(0,o.Lk)("span",{class:"status green"},null,-1))),Tp={key:1},Up=cp((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"7"},"No data available")],-1))),Xp=[Up];function jp(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("EditPopup");return(0,o.uX)(),(0,o.CE)("body",null,[up,(0,o.bF)(d),(0,o.Lk)("div",pp,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Buy Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[l.showPopup?((0,o.uX)(),(0,o.Wv)(u,{key:0,product:l.selectedProduct,reqNo:e.selectedReqNo,onUpdateProductSuccess:i.updateProductSuccess,onClose:i.closeEditPopup},null,8,["product","reqNo","onUpdateProductSuccess","onClose"])):(0,o.Q3)("",!0),l.showAlert?((0,o.uX)(),(0,o.CE)("div",hp,[(0,o.Lk)("div",mp,[kp,(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.closeAlert&&i.closeAlert(...e))},"Close")])])):(0,o.Q3)("",!0),(0,o.Lk)("div",fp,[(0,o.Lk)("div",bp,[(0,o.Lk)("div",vp,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Lp]),(0,o.Lk)("div",gp,[(0,o.Lk)("table",yp,[Pp,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",wp,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((t,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.products,((a,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:a._id},[0===s?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:t.products.length,class:"req-email"},[(0,o.Lk)("div",null,(0,n.v_)(t.reqNo),1)],8,Np)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(a.productName),1),(0,o.Lk)("td",null,(0,n.v_)(a.quantityNeeded),1),(0,o.Lk)("td",null,(0,n.v_)(a.description),1),(0,o.Lk)("td",null,[e.isLinkValid?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.formatLink(a.link),target:"_blank",rel:"noopener noreferrer"},Ep,8,Cp)):((0,o.uX)(),(0,o.CE)("i",_p))]),(0,o.Lk)("td",null,[0===a.status?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"edit",onClick:e=>i.openEditPopup(a,t.reqNo)},"Edit",8,qp)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[Ip,(0,o.eW)("Link updated ")],64))])])))),128))],64)))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Tp,Xp))])])])])])])])}const Rp=e=>((0,o.Qi)("data-v-e5a8cc00"),e=e(),(0,o.jt)(),e),Fp={class:"popup-overlay"},xp={class:"popup-content"},Op=Rp((()=>(0,o.Lk)("div",{class:"popup-header"},"Edit Product Details",-1))),Dp={class:"popup-body"},Ap={class:"form-group"},Wp=Rp((()=>(0,o.Lk)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),Mp={class:"form-group"},Kp=Rp((()=>(0,o.Lk)("label",{for:"link",class:"form-label"},"Link:",-1))),Jp={class:"form-group description-group"},Qp=Rp((()=>(0,o.Lk)("label",{for:"description",class:"form-label"},"Description (50 words max):",-1))),Hp={class:"description-container"},Bp={class:"popup-footer"};function Vp(e,t,a,r,n,l){return(0,o.uX)(),(0,o.CE)("div",Fp,[(0,o.Lk)("div",xp,[Op,(0,o.Lk)("div",Dp,[(0,o.Lk)("div",Ap,[Wp,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"productName","onUpdate:modelValue":t[0]||(t[0]=e=>n.editedProduct.productName=e),class:"form-input",readonly:""},null,512),[[s.Jo,n.editedProduct.productName]])]),(0,o.Lk)("div",Mp,[Kp,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"link","onUpdate:modelValue":t[1]||(t[1]=e=>n.editedProduct.link=e),class:"form-input"},null,512),[[s.Jo,n.editedProduct.link]])]),(0,o.Lk)("div",Jp,[Qp,(0,o.Lk)("div",Hp,[(0,o.bo)((0,o.Lk)("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=e=>n.editedProduct.description=e),class:"form-textarea"},null,512),[[s.Jo,n.editedProduct.description]])])])]),(0,o.Lk)("div",Bp,[(0,o.Lk)("button",{class:"cancel-btn",onClick:t[3]||(t[3]=(...e)=>l.closePopup&&l.closePopup(...e))},"Cancel"),(0,o.Lk)("button",{class:"submit-btn",onClick:t[4]||(t[4]=(...e)=>l.saveChanges&&l.saveChanges(...e))},"Save")])])])}var $p={props:{product:Object,reqNo:String},data(){return{editedProduct:{...this.product}}},methods:{closePopup(){this.$emit("close")},saveChanges(){if(!this.reqNo||!this.product)return void console.error("Invalid product data");const e=`http://localhost:3000/buyupdateproduct/${this.reqNo}/${this.editedProduct.productName}`,t={link:this.editedProduct.link,description:this.editedProduct.description};fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Product updated:",e),this.$emit("update-product-success"),this.closePopup()})).catch((e=>{console.error("Error updating product:",e)}))}}};const zp=(0,P.A)($p,[["render",Vp],["__scopeId","data-v-e5a8cc00"]]);var Yp=zp,Gp={name:"Buy_Product_Member",components:{SidebarMain:gt,HeaderMain:It,EditPopup:Yp},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:"",showPopup:!1,selectedProduct:null,showAlert:!1,alertMessage:""}},methods:{openEditPopup(e,t){this.selectedProduct=e,this.selectedReqNo=t,this.showPopup=!0},closeEditPopup(){this.showPopup=!1},updateProductSuccess(){this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),3e3)},closeAlert(){this.showAlert=!1},formatLink(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e:"#"},async fetchProducts(){try{const e=await fetch("http://localhost:3000/getbuyproduct"),t=await e.json(),a=JSON.parse(sessionStorage.getItem("userData")),s=a?a.email:null;this.requests=t.filter((e=>e.email===s)),this.filterData()}catch(e){console.error("Error fetching products:",e)}},filterData(){this.filteredProducts=this.requests.map((e=>({reqNo:e.reqNo,email:e.email,products:e.products})))}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim(),t=this.requests.filter((e=>e.email===this.userData.email));return t.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.transferredQuantity?t.transferredQuantity.toString():"",o=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)}))}},isLinkValid(){return this.product.link&&this.product.link.length>0},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r}=a;this.userName=s,this.userRole=r,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}}};const Zp=(0,P.A)(Gp,[["render",jp],["__scopeId","data-v-0ffdf0ef"]]);var eh=Zp;const th=e=>((0,o.Qi)("data-v-5680cd88"),e=e(),(0,o.jt)(),e),ah=th((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),sh={class:"main-content"},rh={key:1,class:"custom-alert"},oh={class:"alert-content"},nh=th((()=>(0,o.Lk)("p",null,"Product Updated",-1))),lh={class:"table-responsive"},ih={class:"container"},dh={class:"request-container"},ch=th((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),uh={class:"table-container"},ph={class:"table"},hh=th((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" Req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-info-circle mr-1"}),(0,o.eW)(" Product Description")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-link mr-1"}),(0,o.eW)(" Link")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),mh={key:0},kh=["rowspan"],fh=["href"],bh=th((()=>(0,o.Lk)("i",{class:"fas fa-external-link-alt mr-1"},null,-1))),vh=[bh],Lh={key:1,class:"fas fa-external-link-alt mr-1 text-muted"},gh=["onClick"],yh=th((()=>(0,o.Lk)("span",{class:"status green"},null,-1))),Ph={key:1},wh=th((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"7"},"No data available")],-1))),Nh=[wh];function Ch(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("EditPopup");return(0,o.uX)(),(0,o.CE)("body",null,[ah,(0,o.bF)(d),(0,o.Lk)("div",sh,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Buy Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[l.showPopup?((0,o.uX)(),(0,o.Wv)(u,{key:0,product:l.selectedProduct,reqNo:e.selectedReqNo,onUpdateProductSuccess:i.updateProductSuccess,onClose:i.closeEditPopup},null,8,["product","reqNo","onUpdateProductSuccess","onClose"])):(0,o.Q3)("",!0),l.showAlert?((0,o.uX)(),(0,o.CE)("div",rh,[(0,o.Lk)("div",oh,[nh,(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.closeAlert&&i.closeAlert(...e))},"Close")])])):(0,o.Q3)("",!0),(0,o.Lk)("div",lh,[(0,o.Lk)("div",ih,[(0,o.Lk)("div",dh,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),ch]),(0,o.Lk)("div",uh,[(0,o.Lk)("table",ph,[hh,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",mh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((t,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.products,((a,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:a._id},[0===s?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:t.products.length,class:"req-email"},[(0,o.Lk)("div",null,(0,n.v_)(t.reqNo),1)],8,kh)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(a.productName),1),(0,o.Lk)("td",null,(0,n.v_)(a.quantityNeeded),1),(0,o.Lk)("td",null,(0,n.v_)(a.description),1),(0,o.Lk)("td",null,[e.isLinkValid?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.formatLink(a.link),target:"_blank",rel:"noopener noreferrer"},vh,8,fh)):((0,o.uX)(),(0,o.CE)("i",Lh))]),(0,o.Lk)("td",null,[0===a.status?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"edit",onClick:e=>i.openEditPopup(a,t.reqNo)}," Edit ",8,gh)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[yh,(0,o.eW)("Link updated ")],64))])])))),128))],64)))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Ph,Nh))])])])])])])])}const Sh=e=>((0,o.Qi)("data-v-4e959b0c"),e=e(),(0,o.jt)(),e),Eh={class:"popup-overlay"},_h={class:"popup-content"},qh=Sh((()=>(0,o.Lk)("div",{class:"popup-header"},"Edit Product Details",-1))),Ih={class:"popup-body"},Th={class:"form-group"},Uh=Sh((()=>(0,o.Lk)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),Xh={class:"form-group"},jh=Sh((()=>(0,o.Lk)("label",{for:"link",class:"form-label"},"Link:",-1))),Rh={class:"form-group description-group"},Fh=Sh((()=>(0,o.Lk)("label",{for:"description",class:"form-label"},"Description (50 words max):",-1))),xh={class:"description-container"},Oh={class:"popup-footer"};function Dh(e,t,a,r,n,l){return(0,o.uX)(),(0,o.CE)("div",Eh,[(0,o.Lk)("div",_h,[qh,(0,o.Lk)("div",Ih,[(0,o.Lk)("div",Th,[Uh,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"productName","onUpdate:modelValue":t[0]||(t[0]=e=>n.editedProduct.productName=e),class:"form-input",readonly:""},null,512),[[s.Jo,n.editedProduct.productName]])]),(0,o.Lk)("div",Xh,[jh,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"link","onUpdate:modelValue":t[1]||(t[1]=e=>n.editedProduct.link=e),class:"form-input"},null,512),[[s.Jo,n.editedProduct.link]])]),(0,o.Lk)("div",Rh,[Fh,(0,o.Lk)("div",xh,[(0,o.bo)((0,o.Lk)("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=e=>n.editedProduct.description=e),class:"form-textarea"},null,512),[[s.Jo,n.editedProduct.description]])])])]),(0,o.Lk)("div",Oh,[(0,o.Lk)("button",{class:"cancel-btn",onClick:t[3]||(t[3]=(...e)=>l.closePopup&&l.closePopup(...e))},"Cancel"),(0,o.Lk)("button",{class:"submit-btn",onClick:t[4]||(t[4]=(...e)=>l.saveChanges&&l.saveChanges(...e))},"Save")])])])}var Ah={props:{product:Object,reqNo:String},data(){return{editedProduct:{...this.product}}},methods:{closePopup(){this.$emit("close")},saveChanges(){if(!this.reqNo||!this.product)return void console.error("Invalid product data");const e=`http://localhost:3000/buyupdateproduct/${this.reqNo}/${this.editedProduct.productName}`,t={link:this.editedProduct.link,description:this.editedProduct.description};fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Product updated:",e),this.$emit("update-product-success"),this.closePopup()})).catch((e=>{console.error("Error updating product:",e)}))}}};const Wh=(0,P.A)(Ah,[["render",Dh],["__scopeId","data-v-4e959b0c"]]);var Mh=Wh,Kh={name:"Buy_Product_Head",components:{SidebarMain:ye,HeaderMain:Te,EditPopup:Mh},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:"",showPopup:!1,selectedProduct:null,showAlert:!1,alertMessage:""}},methods:{openEditPopup(e,t){this.selectedProduct=e,this.selectedReqNo=t,this.showPopup=!0},closeEditPopup(){this.showPopup=!1},updateProductSuccess(){this.showAlert=!0,setTimeout((()=>{this.showAlert=!1}),3e3)},closeAlert(){this.showAlert=!1},formatLink(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e:"#"},async fetchProducts(){try{const e=await fetch("http://localhost:3000/getbuyproduct"),t=await e.json(),a=JSON.parse(sessionStorage.getItem("userData")),s=a?a.email:null;this.requests=t.filter((e=>e.email===s)),this.filterData()}catch(e){console.error("Error fetching products:",e)}},filterData(){this.filteredProducts=this.requests.map((e=>({reqNo:e.reqNo,email:e.email,products:e.products})))}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim(),t=this.requests.filter((e=>e.email===this.userData.email));return t.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.transferredQuantity?t.transferredQuantity.toString():"",o=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)}))}},isLinkValid(){return this.product.link&&this.product.link.length>0},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r}=a;this.userName=s,this.userRole=r,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}}};const Jh=(0,P.A)(Kh,[["render",Ch],["__scopeId","data-v-5680cd88"]]);var Qh=Jh;const Hh=e=>((0,o.Qi)("data-v-a9292660"),e=e(),(0,o.jt)(),e),Bh=Hh((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),Vh={class:"main-content"},$h={class:"table-responsive"},zh={class:"container"},Yh={class:"request-container"},Gh=Hh((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),Zh={class:"table-container"},em={class:"table"},tm=Hh((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Transfer No"),(0,o.Lk)("th",null,"Product Name"),(0,o.Lk)("th",null,"Quantity"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Transfer Date")])],-1))),am={key:0},sm=["rowspan"],rm={key:0,class:"returned-text"},om=["onClick"],nm={key:1},lm=Hh((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"5"},"No transferred products found")],-1))),im=[lm];function dm(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("div",null,[Bh,(0,o.bF)(d),(0,o.Lk)("div",Vh,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Transferred Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",$h,[(0,o.Lk)("div",zh,[(0,o.Lk)("div",Yh,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Gh]),(0,o.Lk)("div",Zh,[(0,o.Lk)("table",em,[tm,i.filteredTransfers.length>0?((0,o.uX)(),(0,o.CE)("tbody",am,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredTransfers,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.products,((t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:t._id},[0===a?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:e.products.length},(0,n.v_)(e.reqNo),9,sm)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(t.productName),1),(0,o.Lk)("td",null,(0,n.v_)(t.quantityTransferred),1),(0,o.Lk)("td",null,[1===t.status?((0,o.uX)(),(0,o.CE)("span",rm,"Returned")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"return-btn",onClick:a=>i.returnProduct(e,t)}," Return ",8,om))]),(0,o.Lk)("td",null,(0,n.v_)(new Date(e.date).toLocaleDateString()),1)])))),128))],64)))),128))])):((0,o.uX)(),(0,o.CE)("tbody",nm,im))])])])])])])])}var cm={name:"TransferProductHead",components:{SidebarMain:ye,HeaderMain:Te},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",transfers:[],searchKeyword:""}},computed:{filteredTransfers(){return this.transfers.filter((e=>e.products.some((e=>e.productName.toLowerCase().includes(this.searchKeyword.toLowerCase())))))}},methods:{async fetchTransferredProducts(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)return void console.error("User data not found in sessionStorage");const t=await fetch("http://localhost:3000/getTransferredProducts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json();Array.isArray(a)?this.transfers=a:console.error("Unexpected response format:",a)}catch(e){console.error("Error fetching transferred products:",e)}},async returnProduct(e,t){try{const a=JSON.parse(sessionStorage.getItem("userData"));if(!a||!a.email)return void console.error("User data is missing or incomplete.");const s=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email})}),r=await s.json();if(!r||!r.username)return void console.error("Failed to fetch user info from the backend");const o=await fetch("http://localhost:3000/returnProduct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e.reqNo,productId:t._id,productName:t.productName,quantity:t.quantityTransferred,email:e.email,userName:r.username})}),n=await o.json();n.success?(alert("Product returned successfully!"),this.fetchTransferredProducts()):console.error("Backend response error:",n.message)}catch(a){console.error("Error returning product:",a)}},async fetchUserInfo(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)return void console.error("User data not found in sessionStorage");const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json();a&&a.username&&a.role?(this.userName=a.username,this.userRole=a.role,"Head"!==a.role&&this.$router.push({name:"UnauthorizedPage"})):console.error("Invalid user info response:",a)}catch(e){console.error("Error fetching user info:",e)}}},mounted(){this.fetchUserInfo(),this.fetchTransferredProducts()}};const um=(0,P.A)(cm,[["render",dm],["__scopeId","data-v-a9292660"]]);var pm=um;const hm=e=>((0,o.Qi)("data-v-75ddb5d8"),e=e(),(0,o.jt)(),e),mm=hm((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),km={class:"main-content"},fm={class:"table-responsive"},bm={class:"container"},vm={class:"request-container"},Lm=hm((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),gm={class:"table-container"},ym={class:"table"},Pm=hm((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" Req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-envelope mr-1"}),(0,o.eW)(" Email")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-link mr-1"}),(0,o.eW)(" Link")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,o.eW)(" Status")])])],-1))),wm={key:0},Nm=["rowspan"],Cm=["rowspan"],Sm={style:{width:"10%"}},Em={style:{width:"10%"}},_m=["href"],qm=hm((()=>(0,o.Lk)("i",{class:"fas fa-external-link-alt mr-1"},null,-1))),Im=[qm],Tm={style:{width:"20%"}},Um={key:0},Xm={key:1},jm=hm((()=>(0,o.Lk)("i",{class:"fas fa-check-circle text-success"},null,-1))),Rm={key:2},Fm=hm((()=>(0,o.Lk)("i",{class:"fas fa-shopping-cart text-primary"},null,-1))),xm=["href"],Om=hm((()=>(0,o.Lk)("i",{class:"fas fa-external-link-alt mr-1"},null,-1))),Dm=[Om],Am={key:1},Wm=hm((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"7"},"No data available")],-1))),Mm=[Wm];function Km(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain"),u=(0,o.g2)("Button");return(0,o.uX)(),(0,o.CE)("body",null,[mm,(0,o.bF)(d),(0,o.Lk)("div",km,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Arrange Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",fm,[(0,o.Lk)("div",bm,[(0,o.Lk)("div",vm,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Lm]),(0,o.Lk)("div",gm,[(0,o.Lk)("table",ym,[Pm,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",wm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.products,((t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:t._id},[0===a?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:e.products.length,class:"req-email"},[(0,o.Lk)("div",null,(0,n.v_)(e.reqNo),1)],8,Nm)):(0,o.Q3)("",!0),0===a?((0,o.uX)(),(0,o.CE)("td",{key:1,rowspan:e.products.length,class:"req-email",style:{width:"25%"}},[(0,o.Lk)("div",null,(0,n.v_)(e.email),1)],8,Cm)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(t.productName),1),(0,o.Lk)("td",Sm,(0,n.v_)(t.quantityNeeded),1),(0,o.Lk)("td",Em,[(0,o.Lk)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},Im,8,_m)]),(0,o.Lk)("td",Tm,[0===t.status?((0,o.uX)(),(0,o.CE)("div",Um,[(0,o.bF)(u,{class:"btn-arrange mr-2",onClick:a=>i.arrangeProduct(e.reqNo,t.productName)},{default:(0,o.k6)((()=>[(0,o.eW)("Arrange")])),_:2},1032,["onClick"]),(0,o.bF)(u,{class:"btn-buy",onClick:a=>i.buyProduct(e.reqNo,t.productName)},{default:(0,o.k6)((()=>[(0,o.eW)("Buy")])),_:2},1032,["onClick"])])):1===t.status?((0,o.uX)(),(0,o.CE)("div",Xm,[jm,(0,o.eW)(" Product Arranged ")])):2===t.status?((0,o.uX)(),(0,o.CE)("div",Rm,[Fm,(0,o.eW)(" Moved to Buy ")])):((0,o.uX)(),(0,o.CE)("a",{key:3,href:t.link,target:"_blank",rel:"noopener noreferrer"},Dm,8,xm))])])))),128))],64)))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Am,Mm))])])])])])])])}var Jm={name:"Arrange_Product_Inventory",components:{SidebarMain:wa,HeaderMain:Xa},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:""}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json(),{username:s,role:r}=a;this.userName=s,this.userRole=r,await this.fetchProducts()}}catch(e){console.error("Error fetching user info:",e)}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>{const a=t.reqno?t.reqno.toString():"",s=t.productName?t.productName.toLowerCase():"",r=t.transferredQuantity?t.transferredQuantity.toString():"",o=t.status?t.status.toString():"";return a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e)}))}},methods:{async fetchProducts(){try{const e=await fetch("http://localhost:3000/getarrangeproduct"),t=await e.json();this.requests=t}catch(e){console.error("Error fetching products:",e)}},filterData(){this.filteredProducts=this.requests.map((e=>({reqNo:e.reqNo,email:e.email,products:e.products})))},async arrangeProduct(e,t){await this.updateProductStatus(e,t,1),await this.fetchProducts()},async buyProduct(e,t){await this.updateProductStatus(e,t,2),await this.fetchProducts()},async updateProductStatus(e,t,a){try{const s=await fetch("http://localhost:3000/arrange-update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e,productName:t,status:a})});if(!s.ok)throw new Error("Network response was not ok");const r=await s.json();console.log(r)}catch(s){console.error("There was a problem with the fetch operation:",s.message)}},toggleDescription(e){this.filteredProducts[e].showFullDescription=!this.filteredProducts[e].showFullDescription}}};const Qm=(0,P.A)(Jm,[["render",Km],["__scopeId","data-v-75ddb5d8"]]);var Hm=Qm;const Bm=e=>((0,o.Qi)("data-v-7f91efb6"),e=e(),(0,o.jt)(),e),Vm={lang:"en"},$m=Bm((()=>(0,o.Lk)("head",null,[(0,o.Lk)("meta",{charset:"UTF-8"}),(0,o.Lk)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"}),(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"})],-1))),zm=Bm((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),Ym={class:"main-content"},Gm={class:"table-responsive"},Zm={class:"container"},ek={class:"request-container"},tk=Bm((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),ak={class:"table-container"},sk={class:"table"},rk=Bm((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-list-ol mr-1"}),(0,o.eW)(" Req No")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-envelope mr-1"}),(0,o.eW)(" Email")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-user mr-1"}),(0,o.eW)(" User Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-tag mr-1"}),(0,o.eW)(" Product Name")]),(0,o.Lk)("th",null,[(0,o.Lk)("i",{class:"fas fa-sort-amount-up mr-1"}),(0,o.eW)(" Quantity")])])],-1))),ok={key:0},nk={key:1},lk=Bm((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"5"},"No data available")],-1))),ik=[lk];function dk(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("html",Vm,[$m,(0,o.Lk)("body",null,[zm,(0,o.bF)(d),(0,o.Lk)("div",Ym,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Returned Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",Gm,[(0,o.Lk)("div",Zm,[(0,o.Lk)("div",ek,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),tk]),(0,o.Lk)("div",ak,[(0,o.Lk)("table",sk,[rk,i.filteredProducts.length>0?((0,o.uX)(),(0,o.CE)("tbody",ok,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredProducts,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,n.v_)(e.reqNo),1),(0,o.Lk)("td",null,(0,n.v_)(e.email),1),(0,o.Lk)("td",null,(0,n.v_)(e.userName),1),(0,o.Lk)("td",null,(0,n.v_)(e.productName),1),(0,o.Lk)("td",null,(0,n.v_)(e.quantity),1)])))),128))])):((0,o.uX)(),(0,o.CE)("tbody",nk,ik))])])])])])])])])}var ck={name:"Returned_Products",components:{SidebarMain:wa,HeaderMain:Xa},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",requests:[],searchKeyword:""}},async mounted(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(e&&e.email){const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json();this.userName=a.username,this.userRole=a.role,await this.fetchReturnedProducts()}}catch(e){console.error("Error fetching user info:",e)}},computed:{filteredProducts(){if(!this.searchKeyword.trim())return this.requests;const e=this.searchKeyword.toLowerCase().trim();return this.requests.filter((t=>t.reqNo.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||t.userName.toLowerCase().includes(e)||t.productName.toLowerCase().includes(e)||t.quantity.toString().includes(e)))}},methods:{async fetchReturnedProducts(){try{const e=await fetch("http://localhost:3000/getReturnedProducts"),t=await e.json();this.requests=t}catch(e){console.error("Error fetching returned products:",e)}}}};const uk=(0,P.A)(ck,[["render",dk],["__scopeId","data-v-7f91efb6"]]);var pk=uk;const hk=e=>((0,o.Qi)("data-v-b49897e2"),e=e(),(0,o.jt)(),e),mk=hk((()=>(0,o.Lk)("input",{type:"checkbox",id:"nav-toggle"},null,-1))),kk={class:"main-content"},fk={class:"table-responsive"},bk={class:"container"},vk={class:"request-container"},Lk=hk((()=>(0,o.Lk)("a",{href:"#",class:"search-btn"},[(0,o.Lk)("i",{class:"fas fa-search"})],-1))),gk={class:"table-container"},yk={class:"table"},Pk=hk((()=>(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Transfer No"),(0,o.Lk)("th",null,"Product Name"),(0,o.Lk)("th",null,"Quantity"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Transfer Date")])],-1))),wk={key:0},Nk=["rowspan"],Ck={key:0,class:"returned-text"},Sk=["onClick"],Ek={key:1},_k=hk((()=>(0,o.Lk)("tr",null,[(0,o.Lk)("td",{colspan:"5"},"No transferred products found")],-1))),qk=[_k];function Ik(e,t,a,r,l,i){const d=(0,o.g2)("SidebarMain"),c=(0,o.g2)("HeaderMain");return(0,o.uX)(),(0,o.CE)("div",null,[mk,(0,o.bF)(d),(0,o.Lk)("div",kk,[(0,o.bF)(c,{userProfile:l.userProfile,userName:l.userName,userRole:l.userRole,title:"Transferred Products"},null,8,["userProfile","userName","userRole"]),(0,o.Lk)("main",null,[(0,o.Lk)("div",fk,[(0,o.Lk)("div",bk,[(0,o.Lk)("div",vk,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchKeyword=e),placeholder:"Search...",class:"search-input"},null,512),[[s.Jo,l.searchKeyword]]),Lk]),(0,o.Lk)("div",gk,[(0,o.Lk)("table",yk,[Pk,i.filteredTransfers.length>0?((0,o.uX)(),(0,o.CE)("tbody",wk,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredTransfers,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.products,((t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:t._id},[0===a?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:e.products.length},(0,n.v_)(e.reqNo),9,Nk)):(0,o.Q3)("",!0),(0,o.Lk)("td",null,(0,n.v_)(t.productName),1),(0,o.Lk)("td",null,(0,n.v_)(t.quantityTransferred),1),(0,o.Lk)("td",null,[1===t.status?((0,o.uX)(),(0,o.CE)("span",Ck,"Returned")):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"return-btn",onClick:a=>i.returnProduct(e,t)}," Return ",8,Sk))]),(0,o.Lk)("td",null,(0,n.v_)(new Date(e.date).toLocaleDateString()),1)])))),128))],64)))),128))])):((0,o.uX)(),(0,o.CE)("tbody",Ek,qk))])])])])])])])}var Tk={name:"TransferProductMember",components:{SidebarMain:gt,HeaderMain:It},data(){return{userProfile:{profilePhoto:"https://i.pinimg.com/736x/6b/aa/98/6baa98cc1c3f4d76e989701746e322dd.jpg"},userName:"",userRole:"",transfers:[],searchKeyword:""}},computed:{filteredTransfers(){return this.transfers.filter((e=>e.products.some((e=>e.productName.toLowerCase().includes(this.searchKeyword.toLowerCase())))))}},methods:{async fetchTransferredProducts(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)return void console.error("User data not found in sessionStorage");const t=await fetch("http://localhost:3000/getTransferredProducts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json();Array.isArray(a)?this.transfers=a:console.error("Unexpected response format:",a)}catch(e){console.error("Error fetching transferred products:",e)}},async returnProduct(e,t){try{const a=JSON.parse(sessionStorage.getItem("userData"));if(!a||!a.email)return void console.error("User data is missing or incomplete.");const s=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email})}),r=await s.json();if(!r||!r.username)return void console.error("Failed to fetch user info from the backend");console.log("Data being sent to backend:",{reqNo:e.reqNo,productId:t._id,productName:t.productName,quantity:t.quantityTransferred,email:e.email,userName:r.username});const o=await fetch("http://localhost:3000/returnProduct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reqNo:e.reqNo,productId:t._id,productName:t.productName,quantity:t.quantityTransferred,email:e.email,userName:r.username})}),n=await o.json();n.success?(alert("Product returned successfully!"),this.fetchTransferredProducts()):console.error("Backend response error:",n.message)}catch(a){console.error("Error returning product:",a)}},async fetchUserInfo(){try{const e=JSON.parse(sessionStorage.getItem("userData"));if(!e||!e.email)return void console.error("User data not found in sessionStorage");const t=await fetch("http://localhost:3000/getUserInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})}),a=await t.json();a&&a.username&&a.role?(this.userName=a.username,this.userRole=a.role,"Member"!==a.role&&this.$router.push({name:"UnauthorizedPage"})):console.error("Invalid user info response:",a)}catch(e){console.error("Error fetching user info:",e)}}},mounted(){this.fetchUserInfo(),this.fetchTransferredProducts()}};const Uk=(0,P.A)(Tk,[["render",Ik],["__scopeId","data-v-b49897e2"]]);var Xk=Uk;const jk=[{path:"/",name:"SignUp",component:N,meta:{title:"Sign Up Page",requiresAuth:!1,requiresNoAuth:!0}},{path:"/dashboard",name:"DashboardView",component:X,meta:{title:"DashBoard Page",requiresAuth:!0}},{path:"/dashboard/head",name:"DashboardHead",component:je,meta:{title:"DashBoard Page",requiresAuth:!0}},{path:"/dashboard/member",name:"DashboardMember",component:Xt,meta:{title:"DashBoard Page",requiresAuth:!0}},{path:"/dashboard/inventory",name:"DashboardInventory",component:Fa,meta:{title:"DashBoard Page",requiresAuth:!0}},{path:"/dashboard/users",name:"ViewUsers",component:zs,meta:{title:"ViewUsers Page",requiresAuth:!0}},{path:"/dashboard/product",name:"Product_list",component:To,meta:{title:"Product Page",requiresAuth:!0}},{path:"/dashboard/product_public",name:"Product_Public",component:rl,meta:{title:"Product_Public Page",requiresAuth:!0}},{path:"/dashboard/request_member",name:"Request_Member",component:xl,meta:{title:"Request_Member Page",requiresAuth:!0}},{path:"/dashboard/product_head",name:"Product_Head",component:$i,meta:{title:"Product_Head Page",requiresAuth:!0}},{path:"/dashboard/request_head",name:"Request_Head",component:_d,meta:{title:"Request_Head Page",requiresAuth:!0}},{path:"/dashboard/approval_head",name:"Approval_Head",component:cc,meta:{title:"Approval_Head Page",requiresAuth:!0}},{path:"/dashboard/approval_inventory",name:"Approval_Inventory",component:tu,meta:{title:"Approval_Inventory Page",requiresAuth:!0}},{path:"/dashboard/transfered_inventory",name:"Transfered_Inventory",component:ju,meta:{title:"Transfered_Inventory Page",requiresAuth:!0}},{path:"/dashboard/buy_product_inventory",name:"Buy_Product_Inventory",component:dp,meta:{title:"Buy_Product_Inventory Page",requiresAuth:!0}},{path:"/dashboard/buy_product_member",name:"Buy_Product_Member",component:eh,meta:{title:"Buy_Product_Member Page",requiresAuth:!0}},{path:"/dashboard/buy_product_head",name:"Buy_Product_Head",component:Qh,meta:{title:"Buy_Product_Head Page",requiresAuth:!0}},{path:"/dashboard/arrange_product_inventory",name:"Arrange_Product_Inventory",component:Hm,meta:{title:"Arrange_Product_Inventory Page",requiresAuth:!0}},{path:"/dashboard/borrowed_Products_Member",name:"borrowed_Products_Member",component:Xk,meta:{title:"borrowed_Products_Member Page",requiresAuth:!0}},{path:"/dashboard/Buy_Product_Head",name:"Buy_Product_Head",component:Qh,meta:{title:"Buy_Product_Head Page",requiresAuth:!0}},{path:"/dashboard/borrowed_Products_Head",name:"borrowed_Products_Head",component:pm,meta:{title:"borrowed_Products_Head Page",requiresAuth:!0}},{path:"/dashboard/Returned_Products",name:"Returned_Products",component:pk,meta:{title:"Returned_Products Page",requiresAuth:!0}},{path:"/unauthorized",name:"UnauthorizedPage",component:Qo,meta:{title:"Unauthorized Page",requiresAuth:!0}}],Rk=(0,r.aE)({history:(0,r.LA)(),routes:jk});Rk.beforeEach(((e,t,a)=>{if(document.title=e.meta.title?`${e.meta.title} | INVENTORY`:"INVENTORY",e.matched.some((e=>e.meta.requiresAuth))){const e=sessionStorage.getItem("isUserSignedIn");e?a():a({name:"SignUp"})}else if(e.matched.some((e=>e.meta.requiresNoAuth))){const e=sessionStorage.getItem("isUserSignedIn");e?a({name:"DashboardView"}):a()}else a()}));var Fk=Rk;const xk={id:"app"};function Ok(e,t,a,s,r,n){const l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",xk,[(0,o.bF)(l,null,{default:(0,o.k6)((({Component:e})=>[((0,o.uX)(),(0,o.Wv)(o.PR,null,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e)))],1024))])),_:1})])}var Dk={};const Ak=(0,P.A)(Dk,[["render",Ok]]);var Wk=Ak,Mk=a(4828);const Kk=(0,s.Ef)(Wk);Kk.use(Fk),Kk.use(Mk.A,{clientId:"676785461988-icoil0dtlld2fcp5kb22llst7t94mans.apps.googleusercontent.com",scope:"email",prompt:"consent"}),Kk.use(Fk),Kk.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],o=e[c][2];for(var l=!0,i=0;i<s.length;i++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[i])}))?s.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var o=Object.create(null);a.r(o);var n={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&s;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){n[e]=function(){return s[e]}}));return n["default"]=function(){return s},a.d(o,n),o}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{354:"a50ecb8f",668:"211d0217",838:"c3aa6863"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="inventory:";a.l=function(s,r,o,n){if(e[s])e[s].push(r);else{var l,i;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+o){l=u;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+o),l.src=s),e[s]=[r];var p=function(t,a){l.onerror=l.onload=null,clearTimeout(h);var r=e[s];if(delete e[s],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.f.j=function(t,s){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var o=new Promise((function(a,s){r=e[t]=[a,s]}));s.push(r[2]=o);var n=a.p+a.u(t),l=new Error,i=function(s){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",l.name="ChunkLoadError",l.type=o,l.request=n,r[1](l)}};a.l(n,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,n=s[0],l=s[1],i=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(i)var c=i(a)}for(t&&t(s);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunkinventory"]=self["webpackChunkinventory"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(3277)}));s=a.O(s)})();
//# sourceMappingURL=app.b54dfccf.js.map